<!DOCTYPE html>
<html dir="ltr" class="client-firefox client-firefox-7 client-gecko client-linux" lang="de"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Pygame-Tutorial – spieleprogrammierer.de :: Wiki</title>
<meta name="description" content="Die Community zur Spieleprogrammierung: Forum und Wiki zur Entwicklung von Spielen mit C, C++, C#, Java, DirectX und OpenGL.">
<meta name="keywords" content="spieleprogrammierer, spieleprogrammierung, spieleentwickler, spieleentwicklung, game development, game design, spiele programmieren, spiele entwickeln, programmieren, ausbildung, studium, spiele, forum, wiki, tutorials, bücher, links, texturen, sprites, 3d modelle, 3d modellierung, sounds, soundeffekte, 3d grafik, shader, physik, visual c++, visual c#, visual studio, c++, c#, java, directx, direct3d, opengl, directsound, directinput, ogre3d, bullet, david scherfgen">
<meta name="viewport" content="width=1100">
<meta name="generator" content="MediaWiki 1.17.5">
<meta name="robots" content="noindex,follow">
<link rel="shortcut icon" href="https://www.spieleprogrammierer.de/w/xfavicon.png.pagespeed.ic.mcYX7haewo.png">
<link rel="search" type="application/opensearchdescription+xml" href="https://www.spieleprogrammierer.de/w/opensearch_desc.php" title="Spieleprogrammierer-Wiki (de)">
<link rel="EditURI" type="application/rsd+xml" href="https://www.spieleprogrammierer.de/w/api.php?action=rsd">
<link rel="copyright" href="https://www.spieleprogrammierer.de/wiki/SpproWiki:Lizenzbestimmungen_Creative_Commons_Attribution-ShareAlike_3.0_Unported">
<link rel="alternate" type="application/atom+xml" title="Atom-Feed für „Spieleprogrammierer-Wiki“" href="https://www.spieleprogrammierer.de/w/index.php?title=Spezial:Letzte_%C3%84nderungen&amp;feed=atom">
<link rel="stylesheet" href="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/load.css">
<style type="text/css" media="all">.suggestions{overflow:hidden;position:absolute;top:0px;left:0px;width:0px;border:none;z-index:99;padding:0;margin:-1px -1px 0 0} html > body .suggestions{margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:Window;font-size:0.8em;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;background-color:Window;font-size:0.8em;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;color:WindowText;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left}.suggestions-result-current{background-color:#4C59A6;background-color:Highlight;color:white;color:HighlightText}.suggestions-special .special-label{font-size:0.8em;color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white;color:HighlightText}.autoellipsis-matched,.highlight{font-weight:bold}</style><meta name="ResourceLoaderDynamicStyles" content="">
<style>a.new,#quickbar a.new{color:#ba0000}</style>
<style type="text/css">.python.source-python .imp{font-weight:bold;color:red}.python.source-python li,.python.source-python .li1{font-weight:normal;vertical-align:top}.python.source-python .ln{width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top}.python.source-python .li2{font-weight:bold;vertical-align:top}.python.source-python .kw1{color:#f70;font-weight:bold}.python.source-python .kw2{color:green}.python.source-python .kw3{color:#dc143c}.python.source-python .kw4{color:#0000cd}.python.source-python .co1{color:gray;font-style:italic}.python.source-python .coMULTI{color:gray;font-style:italic}.python.source-python .es0{color:#009;font-weight:bold}.python.source-python .br0{color:#000}.python.source-python .sy0{color:#6c6}.python.source-python .st0{color:#483d8b}.python.source-python .nu0{color:#ff4500}.python.source-python .me1{color:#000}.python.source-python .ln-xtra,.python.source-python li.ln-xtra,.python.source-python div.ln-xtra{background-color:#ffc}.python.source-python span.xtra{display:block}</style>
<style>div.mw-geshi{padding:1em;border:1px dashed #2f6fab;color:#000;background-color:#f9f9f9;line-height:1.1em;margin-top:1em;margin-bottom:1em;overflow:auto}div.mw-geshi pre{border:none;background-color:transparent;margin:0;padding:0}div.mw-geshi li{line-height:1.1em;padding:0;padding-left:.8em;margin:0;border-left:1px solid #d0d0d0}div.mw-geshi ol{font-family:monospace,"Courier New";color:gray}</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/w/skins/vector/csshover.min.htc")}</style><![endif]--><style>@media print {#ghostery-purple-box {display:none !important}}</style></head>
<body class="mediawiki ltr capitalize-all-nouns ns-0 ns-subject page-Pygame-Tutorial skin-vector">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<!-- content -->
<div id="content">
<a id="top"></a>
<div id="mw-js-message" style="display:none;"></div>
<!-- firstHeading -->
<h1 id="firstHeading" class="firstHeading">Pygame-Tutorial</h1>
<!-- /firstHeading -->
<!-- bodyContent -->
<div id="bodyContent">
<!-- tagline -->
<div id="siteSub">Aus Spieleprogrammierer-Wiki</div>
<!-- /tagline -->
<!-- subtitle -->
<div id="contentSub"></div>
<!-- /subtitle -->
<!-- jumpto -->
<div id="jump-to-nav">
Wechseln zu: <a href="#mw-head">Navigation</a>,
<a href="#p-search">Suche</a>
</div>
<!-- /jumpto -->
<!-- bodytext -->
<p>Dieses Tutorial richtet sich an Anfänger, die bereits die Grundlagen 
von Python kennen und in die Spieleprogrammierung einsteigen wollen. Es 
wird eine praktische Einführung in die Pygame-Bibliothek gegeben.
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Inhaltsverzeichnis</h2> <span class="toctoggle">[<a id="togglelink" class="internal" href="#">Verbergen</a>]</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Einleitung"><span class="tocnumber">1</span> <span class="toctext">Einleitung</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Was_ist_Pygame.3F"><span class="tocnumber">1.1</span> <span class="toctext">Was ist Pygame?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Wo_bekomme_ich_Pygame.3F"><span class="tocnumber">1.2</span> <span class="toctext">Wo bekomme ich Pygame?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Pygame_einrichten"><span class="tocnumber">2</span> <span class="toctext">Pygame einrichten</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Die_Entwicklungsumgebung_.28IDE.29"><span class="tocnumber">2.1</span> <span class="toctext">Die Entwicklungsumgebung (IDE)</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Pygame_integrieren"><span class="tocnumber">2.2</span> <span class="toctext">Pygame integrieren</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Testen"><span class="tocnumber">2.3</span> <span class="toctext">Testen</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Ein_paar_Grundlagen"><span class="tocnumber">3</span> <span class="toctext">Ein paar Grundlagen</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Das_erste_Beispiel"><span class="tocnumber">3.1</span> <span class="toctext">Das erste Beispiel</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Pygame_initialisieren"><span class="tocnumber">3.2</span> <span class="toctext">Pygame initialisieren</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Die_Nachrichtenschleife"><span class="tocnumber">3.3</span> <span class="toctext">Die Nachrichtenschleife</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Programmieren_einer_Tilemap"><span class="tocnumber">4</span> <span class="toctext">Programmieren einer Tilemap</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Beschreibung_der_Tilemap"><span class="tocnumber">4.1</span> <span class="toctext">Beschreibung der Tilemap</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Was_ist_das.3F"><span class="tocnumber">4.1.1</span> <span class="toctext">Was ist das?</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Wie_gehen_wir_vor.3F"><span class="tocnumber">4.1.2</span> <span class="toctext">Wie gehen wir vor?</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Bilder_in_Pygame"><span class="tocnumber">4.2</span> <span class="toctext">Bilder in Pygame</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Los_geht.27s"><span class="tocnumber">4.2.1</span> <span class="toctext">Los geht's</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Surfaces"><span class="tocnumber">4.2.2</span> <span class="toctext">Surfaces</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Formatkonvertierung"><span class="tocnumber">4.2.3</span> <span class="toctext">Formatkonvertierung</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Alles_nur_rechteckig.3F"><span class="tocnumber">4.2.4</span> <span class="toctext">Alles nur rechteckig?</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Zusammengesetzt:_ein_Bild_laden"><span class="tocnumber">4.2.5</span> <span class="toctext">Zusammengesetzt: ein Bild laden</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Bild_anzeigen"><span class="tocnumber">4.2.6</span> <span class="toctext">Bild anzeigen</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Mehr_zu_Surfaces"><span class="tocnumber">4.2.7</span> <span class="toctext">Mehr zu Surfaces</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24"><a href="#Jetzt_aber_zur_Tilemap"><span class="tocnumber">4.3</span> <span class="toctext">Jetzt aber zur Tilemap</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Die_Klasse_TileType"><span class="tocnumber">4.3.1</span> <span class="toctext">Die Klasse TileType</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Die_Klasse_Tileset"><span class="tocnumber">4.3.2</span> <span class="toctext">Die Klasse Tileset</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Die_Klasse_Tilemap"><span class="tocnumber">4.3.3</span> <span class="toctext">Die Klasse Tilemap</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Tilemap_anzeigen_lassen"><span class="tocnumber">4.3.4</span> <span class="toctext">Tilemap anzeigen lassen</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#.C3.9Cberblick"><span class="tocnumber">4.3.5</span> <span class="toctext">Überblick</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#Animation_einer_Spielfigur"><span class="tocnumber">5</span> <span class="toctext">Animation einer Spielfigur</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#Der_Plan"><span class="tocnumber">5.1</span> <span class="toctext">Der Plan</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Die_Animation-Klasse"><span class="tocnumber">5.2</span> <span class="toctext">Die Animation-Klasse</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Die_Player-Klasse"><span class="tocnumber">5.3</span> <span class="toctext">Die Player-Klasse</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Zusammenbasteln"><span class="tocnumber">5.4</span> <span class="toctext">Zusammenbasteln</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#Sourcecode_herunterladen"><span class="tocnumber">6</span> <span class="toctext">Sourcecode herunterladen</span></a></li>
<li class="toclevel-1 tocsection-36"><a href="#Und_jetzt.3F"><span class="tocnumber">7</span> <span class="toctext">Und jetzt?</span></a></li>
</ul>
</td></tr></tbody></table>
<h2> <span class="mw-headline" id="Einleitung"> Einleitung </span></h2>
<h3> <span class="mw-headline" id="Was_ist_Pygame.3F"> Was ist Pygame? </span></h3>
<p>Pygame ist eine Sammlung von Python-Modulen, die es einem 
ermöglichen, relativ einfach und schnell Spiele zu programmieren. Pygame
 basiert auf der <a href="http://www.libsdl.org/" class="external text">SDL-Bibliothek</a>
 (Simple DirectMedia Layer). Pygame ist kostenlos zu haben (Lizenz LGPL)
 und läuft auf jedem Betriebssystem, für das es einen Python-Interpreter
 gibt, wenn man plattformunabhängig programmiert (was in Python aber 
nicht schwer ist).
</p>
<h3> <span class="mw-headline" id="Wo_bekomme_ich_Pygame.3F"> Wo bekomme ich Pygame? </span></h3>
<p>Die offizielle Pygame-Webseite findet sich unter <a href="http://www.pygame.org/" class="external free">http://www.pygame.org/</a>. Dort gibt es auch immer die jeweils neuste Version, die Dokumentation, Tutorials und vieles mehr. Unter <a href="http://www.python.org/" class="external free">http://www.python.org/</a>
 gibt es die Python-Interpreter, und alle, die Python noch nicht kennen,
 finden dort alles, um es zu lernen. In diesem Tutorial wird Pygame 
Version 1.9.2 und Python Version 2.7.9 verwendet.
</p>
<h2> <span class="mw-headline" id="Pygame_einrichten"> Pygame einrichten </span></h2>
<h3> <span class="mw-headline" id="Die_Entwicklungsumgebung_.28IDE.29"> Die Entwicklungsumgebung (IDE) </span></h3>
<p>Man kann Python-Programme ganz einfach mit einem simplen Texteditor 
(wie Notepad unter Windows) schreiben. Viele spezielle Editoren bieten 
aber einiges mehr, was einem beim Programmieren hilft, wie etwa 
Syntax-Highlighting, Code-Vervollständigung und mehr. Als Beispiel wird 
hier die Einrichtung mit <a href="http://www.eclipse.org/" class="external text">Eclipse</a> und dem <a href="http://www.pydev.org/" class="external text">Pydev-Plugin</a> beschrieben. Das Installieren gestaltet sich ziemlich einfach. Wir fügen das Pydev-Repository unter <i>Help &gt; Install New Software... &gt; Add...</i> hinzu: Der Name ist egal, die Location ist <a href="http://pydev.org/updates" class="external free">http://pydev.org/updates</a>. Dann wählen wir das soeben hinzugefügte Repository im Dropdown-Menü oben aus, haken <i>PyDev</i> an und folgen den Anweisungen. Jetzt muss unter <i>Window &gt; Preferences &gt; Pydev &gt; Interpreter - Python</i> noch die EXE-Datei des Python-Interpreters angegeben werden. Danach können wir in die Pydev-Perspektive schalten und loslegen.
</p>
<h3> <span class="mw-headline" id="Pygame_integrieren"> Pygame integrieren </span></h3>
<p>Dies geschieht am einfachsten über das Installationsprogramm. Dieses 
installiert alle benötigten Dateien (Python-Module, SDL-DLLs usw.) in 
den Unterordner <tt>site-packages</tt> der Python-Installation. Eclipse sollte das automatisch erkennen.
</p>
<h3> <span class="mw-headline" id="Testen"> Testen </span></h3>
<p>Zuerst erstellen wir ein Python-Projekt: <i>File &gt; New &gt; Other &gt; Pydev &gt; Pydev Project</i>. Jetzt müssen wir einen Namen für das Projekt eingeben, <i>Create 'src' folder...</i> auswählen und auf <i>Finish</i> klicken. Danach fragt Eclipse möglicherweise noch, ob wir die <i>Pydev Perspective</i> öffnen möchten. Dies beantworten wir mit <i>Ja</i>, und schon haben wir ein Python-Projekt angelegt.
</p><p>Fügen wir ein wenig Code hinzu. Dazu machen wir einen Rechtsklick auf den <i>src</i>-Ordner in unserem Projekt links in der Übersicht und klicken auf <i>New &gt; Pydev Package</i>. Dann geben wir einen Namen ein und klicken auf <i>Finish</i>. Pydev hat jetzt automatisch eine <tt>__init__.py</tt> Datei erstellt. Wer möchte, kann diese umbenennen, zum Beispiel in <tt>Teil_1.py</tt>. Die Datei öffnen wir jetzt durch einen Doppelklick und schreiben dieses einfache Skript zum Testen der Installation hinein:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Pygame-Modul importieren.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Überprüfen, ob die optionalen Text- und Sound-Module geladen werden konnten.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">font</span>: <span class="kw1">print</span><span class="br0">(</span><span class="st0">'Fehler pygame.font Modul konnte nicht geladen werden!'</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">mixer</span>: <span class="kw1">print</span><span class="br0">(</span><span class="st0">'Fehler pygame.mixer Modul konnte nicht geladen werden!'</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">def</span> main<span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Initialisieren aller Pygame-Module und    </span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Fenster erstellen (wir bekommen eine Surface, die den Bildschirm repräsentiert).</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">init</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Titel des Fensters setzen, Mauszeiger nicht verstecken und Tastendrücke wiederholt senden.</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">display</span>.<span class="me1">set_caption</span><span class="br0">(</span><span class="st0">"Pygame-Tutorial: Grundlagen"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">mouse</span>.<span class="me1">set_visible</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">key</span>.<span class="me1">set_repeat</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Clock-Objekt erstellen, das wir benötigen, um die Framerate zu begrenzen.</span></pre></li><li class="li1"><pre class="de1">    clock <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">Clock</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Die Schleife, und damit unser Spiel, läuft solange running == True.</span></pre></li><li class="li1"><pre class="de1">    running <span class="sy0">=</span> <span class="kw2">True</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">while</span> running:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Framerate auf 30 Frames pro Sekunde beschränken.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Pygame wartet, falls das Programm schneller läuft.</span></pre></li><li class="li1"><pre class="de1">        clock.<span class="me1">tick</span><span class="br0">(</span><span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># screen-Surface mit Schwarz (RGB = 0, 0, 0) füllen.</span></pre></li><li class="li1"><pre class="de1">        screen.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Alle aufgelaufenen Events holen und abarbeiten.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Spiel beenden, wenn wir ein QUIT-Event finden.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:</pre></li><li class="li1"><pre class="de1">                running <span class="sy0">=</span> <span class="kw2">False</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Wir interessieren uns auch für "Taste gedrückt"-Events.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">KEYDOWN</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wenn Escape gedrückt wird, posten wir ein QUIT-Event in Pygames Event-Warteschlange.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> event.<span class="me1">key</span> <span class="sy0">==</span> pygame.<span class="me1">K_ESCAPE</span>:</pre></li><li class="li1"><pre class="de1">                    pygame.<span class="me1">event</span>.<span class="me1">post</span><span class="br0">(</span>pygame.<span class="me1">event</span>.<span class="me1">Event</span><span class="br0">(</span>pygame.<span class="me1">QUIT</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Inhalt von screen anzeigen.</span></pre></li><li class="li1"><pre class="de1">        pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Überprüfen, ob dieses Modul als Programm läuft und nicht in einem anderen Modul importiert wird.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">'__main__'</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Unsere Main-Funktion aufrufen.</span></pre></li><li class="li1"><pre class="de1">    main<span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Wer jetzt bemerkt, dass er sich noch nicht mit Python auskennt, der 
sollte diese Sprache zuerst einmal erlernen. Ansonsten sollte der größte
 Teil keine Probleme bereiten. Starten können wir mit <i>Run &gt; Run &gt; Python &gt; Run &gt; OK</i>,
 Beenden über Escape oder das X. Es sollte ein Fenster mit schwarzem 
Hintergrund zu sehen sein – nicht mehr, aber auch nicht weniger.
</p>
<h2> <span class="mw-headline" id="Ein_paar_Grundlagen"> Ein paar Grundlagen </span></h2>
<p>Schauen wir uns das erste Beispiel mal etwas genauer an ...
</p>
<h3> <span class="mw-headline" id="Das_erste_Beispiel"> Das erste Beispiel </span></h3>
<p>Zuerst importieren wir das benötigte Pygame-Modul. Wenig Aufregendes:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="4"><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li></ol></div></div>
<p>Über diese Zeile importieren wir alles, was wir für's Programmieren 
mit Pygame benötigen. Zusätzlich können wir noch testen, ob die Module 
für die Sound- und die Font-Bibliothek korrekt geladen wurden.
</p>
<h3> <span class="mw-headline" id="Pygame_initialisieren"> Pygame initialisieren </span></h3>
<p>Als Nächstes initialisieren wir Pygame und erstellen eine Surface 
(was das ist, besprechen wir später noch), die wir als Bildschirm 
verwenden, mit einer festen Auflösung von 800x600 Pixeln.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="13"><li class="li1"><pre class="de1">    pygame.<span class="me1">init</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">)</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Der <tt>set_mode</tt> Funktion können wir noch zusätzliche Parameter 
übergeben, aber ohne sie sucht SDL die für den PC besten Einstellungen 
heraus, was in den meisten Fällen der bessere Weg ist. Wer ein 
bestimmtes Format benötigt, schaut <a href="http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode" class="external text">hier in der Dokumentation</a>
 nach. Das Festlegen des Fenstertitels und das Anzeigen der Maus ist 
selbsterklärend. Als Letztes schalten wir noch die Tastenwiederholung 
ein. Dadurch weisen wir Pygame an, wiederholt eine "Taste 
gedrückt"-Nachricht zu senden, obwohl die Taste noch nicht losgelassen 
wurde.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="17"><li class="li1"><pre class="de1">    pygame.<span class="me1">display</span>.<span class="me1">set_caption</span><span class="br0">(</span><span class="st0">"Pygame-Tutorial: Grundlagen"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">mouse</span>.<span class="me1">set_visible</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">key</span>.<span class="me1">set_repeat</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">30</span><span class="br0">)</span></pre></li></ol></div></div>
<h3> <span class="mw-headline" id="Die_Nachrichtenschleife"> Die Nachrichtenschleife </span></h3>
<p>Damit ist Pygame grundlegend initialisiert. Jetzt müssen wir nur noch
 dafür sorgen, dass das Fenster auch länger als ein Frame angezeigt 
wird. Dafür verwenden wir eine Nachrichtenschleife. Um Probleme mit der 
Geschwindigkeit der verschiedenen PCs zu vermeiden, legen wir fest, dass
 wir maximal 30 Frames pro Sekunde berechnen wollen:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="22"><li class="li1"><pre class="de1">    clock <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">Clock</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Die Schleife, und damit unser Spiel, läuft solange running == True.</span></pre></li><li class="li1"><pre class="de1">    running <span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">while</span> running:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Framerate auf 30 Frames pro Sekunde beschränken.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Pygame wartet, falls das Programm schneller läuft.</span></pre></li><li class="li1"><pre class="de1">        clock.<span class="me1">tick</span><span class="br0">(</span><span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># screen-Surface mit Schwarz (RGB = 0, 0, 0) füllen.</span></pre></li><li class="li1"><pre class="de1">        screen.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Zuerst erstellen wir ein <tt>time.Clock</tt>-Objekt, welches sich um 
die Framerate-Begrenzung kümmern soll. Um die Schleife bequem wieder 
verlassen zu können, verwenden wir die <tt>running</tt>-Variable. Solange sie 1 ist, bleiben wir in der Schleife. In der Schleife lassen wir das <tt>time.Clock</tt>-Objekt
 erstmal berechnen, wie lange wir warten müssen, um maximal 30 Frames 
pro Sekunde zu erhalten. Danach überschreiben wir den gesamten 
Bildschirm mit der Farbe Schwarz.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="35"><li class="li1"><pre class="de1">        <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Spiel beenden, wenn wir ein QUIT-Event finden.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:</pre></li><li class="li1"><pre class="de1">                running <span class="sy0">=</span> <span class="kw2">False</span></pre></li></ol></div></div>
<p>Hier haben wir die erste Abbruchbedingung. Wir holen uns per <tt>pygame.event.get()</tt> sämtliche Events, die Pygame empfangen/generiert hat. Finden wir eines vom Typ <tt>QUIT</tt>, setzen wir die <tt>running</tt>-Variable auf 0, sodass wir die Schleife verlassen können.
Als Nächstes interessiert uns, welche Tasten der Benutzer gedrückt hat. Diese Events werden durch den Typ <tt>KEYDOWN</tt> repräsentiert.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="41"><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">KEYDOWN</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wenn Escape gedrückt wird, posten wir ein QUIT-Event in Pygames Event-Warteschlange.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> event.<span class="me1">key</span> <span class="sy0">==</span> pygame.<span class="me1">K_ESCAPE</span>:</pre></li><li class="li1"><pre class="de1">                    pygame.<span class="me1">event</span>.<span class="me1">post</span><span class="br0">(</span>pygame.<span class="me1">event</span>.<span class="me1">Event</span><span class="br0">(</span>pygame.<span class="me1">QUIT</span><span class="br0">)</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Wir testen hier nur auf die Escape-Taste. Wurde sie gedrückt, generieren wir ein Event vom Typ <tt>QUIT</tt>, was dafür sorgt, dass wir die Schleife verlassen (wir erinnern uns: auf dieses Event reagieren wir ja etwas weiter oben).
Nachdem wir alle Events durchgesehen haben, können wir endlich den Bildschirminhalt anzeigen:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="47"><li class="li1"><pre class="de1">        pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Intern arbeitet Pygame mit einem Puffer für den Bildschrim, der erst 
mit diesem Befehl angezeigt wird (Double Buffering). Würde man direkt 
auf den Bildschirm rendern, würde man den Bildaufbau sehen können.
Damit sind wir auch fast schon am Ende des Beispiels. Das gerade 
Besprochene haben wir in eine Funktion <tt>main</tt> gesteckt, die wir jetzt einfach aufrufen, falls diese Datei nicht als Modul importiert wird:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="51"><li class="li1"><pre class="de1"><span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">'__main__'</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Unsere Main-Funktion aufrufen.</span></pre></li><li class="li1"><pre class="de1">    main<span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Damit sind wir mit den Grundlagen fertig.
</p>
<h2> <span class="mw-headline" id="Programmieren_einer_Tilemap"> Programmieren einer Tilemap </span></h2>
<p>Jetzt werden wir, am praktischen Beispiel einer Tilemap für ein 
2D-Spiel, die Pygame-Funktionen für das Laden und Anzeigen von Bildern 
kennen lernen.
</p>
<h3> <span class="mw-headline" id="Beschreibung_der_Tilemap"> Beschreibung der Tilemap </span></h3>
<h4> <span class="mw-headline" id="Was_ist_das.3F"> Was ist das? </span></h4>
<div class="thumb tright"><div class="thumbinner" style="width:182px;"><a href="https://www.spieleprogrammierer.de/wiki/Datei:Pygame-Tutorial_Tilemap.png" class="image"><script data-pagespeed-no-defer="">//<![CDATA[
(function(){for(var g="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=a.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,k=["String","prototype","repeat"],l=0;l<k.length-1;l++){var m=k[l];m in h||(h[m]={});h=h[m]}var n=k[k.length-1],p=h[n],q=p?p:function(b){var c;if(null==this)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");c=this+"";if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var a="";b;)if(b&1&&(a+=c),b>>>=1)c+=c;return a};q!=p&&null!=q&&g(h,n,{configurable:!0,writable:!0,value:q});var t=this;function u(b,c){var a=b.split("."),d=t;a[0]in d||!d.execScript||d.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)a.length||void 0===c?d[e]?d=d[e]:d=d[e]={}:d[e]=c};function v(b){var c=b.length;if(0<c){for(var a=Array(c),d=0;d<c;d++)a[d]=b[d];return a}return[]};function w(b){var c=window;if(c.addEventListener)c.addEventListener("load",b,!1);else if(c.attachEvent)c.attachEvent("onload",b);else{var a=c.onload;c.onload=function(){b.call(this);a&&a.call(this)}}};var x;function y(b,c,a,d,e){this.h=b;this.j=c;this.l=a;this.f=e;this.g={height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};this.i=d;this.b={};this.a=[];this.c={}}function z(b,c){var a,d,e=c.getAttribute("data-pagespeed-url-hash");if(a=e&&!(e in b.c))if(0>=c.offsetWidth&&0>=c.offsetHeight)a=!1;else{d=c.getBoundingClientRect();var f=document.body;a=d.top+("pageYOffset"in window?window.pageYOffset:(document.documentElement||f.parentNode||f).scrollTop);d=d.left+("pageXOffset"in window?window.pageXOffset:(document.documentElement||f.parentNode||f).scrollLeft);f=a.toString()+","+d;b.b.hasOwnProperty(f)?a=!1:(b.b[f]=!0,a=a<=b.g.height&&d<=b.g.width)}a&&(b.a.push(e),b.c[e]=!0)}y.prototype.checkImageForCriticality=function(b){b.getBoundingClientRect&&z(this,b)};u("pagespeed.CriticalImages.checkImageForCriticality",function(b){x.checkImageForCriticality(b)});u("pagespeed.CriticalImages.checkCriticalImages",function(){A(x)});function A(b){b.b={};for(var c=["IMG","INPUT"],a=[],d=0;d<c.length;++d)a=a.concat(v(document.getElementsByTagName(c[d])));if(a.length&&a[0].getBoundingClientRect){for(d=0;c=a[d];++d)z(b,c);a="oh="+b.l;b.f&&(a+="&n="+b.f);if(c=!!b.a.length)for(a+="&ci="+encodeURIComponent(b.a[0]),d=1;d<b.a.length;++d){var e=","+encodeURIComponent(b.a[d]);131072>=a.length+e.length&&(a+=e)}b.i&&(e="&rd="+encodeURIComponent(JSON.stringify(B())),131072>=a.length+e.length&&(a+=e),c=!0);C=a;if(c){d=b.h;b=b.j;var f;if(window.XMLHttpRequest)f=new XMLHttpRequest;else if(window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(D){}}f&&(f.open("POST",d+(-1==d.indexOf("?")?"?":"&")+"url="+encodeURIComponent(b)),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a))}}}function B(){var b={},c;c=document.getElementsByTagName("IMG");if(!c.length)return{};var a=c[0];if(!("naturalWidth"in a&&"naturalHeight"in a))return{};for(var d=0;a=c[d];++d){var e=a.getAttribute("data-pagespeed-url-hash");e&&(!(e in b)&&0<a.width&&0<a.height&&0<a.naturalWidth&&0<a.naturalHeight||e in b&&a.width>=b[e].o&&a.height>=b[e].m)&&(b[e]={rw:a.width,rh:a.height,ow:a.naturalWidth,oh:a.naturalHeight})}return b}var C="";u("pagespeed.CriticalImages.getBeaconData",function(){return C});u("pagespeed.CriticalImages.Run",function(b,c,a,d,e,f){var r=new y(b,c,a,e,f);x=r;d&&w(function(){window.setTimeout(function(){A(r)},0)})});})();pagespeed.CriticalImages.Run('/mod_pagespeed_beacon','https://www.spieleprogrammierer.de/w/index.php?title=Pygame-Tutorial&printable=yes','eu6fndHSQO',true,false,'f4LVTGQtJWg');
//]]></script><img alt="" src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/x180px-Pygame-Tutorial_Tilemap.webp" class="thumbimage" data-pagespeed-url-hash="2443425515" onload="pagespeed.CriticalImages.checkImageForCriticality(this);" width="180" height="141"></a> <div class="thumbcaption"><div class="magnify"><a href="https://www.spieleprogrammierer.de/wiki/Datei:Pygame-Tutorial_Tilemap.png" class="internal" title="vergrößern"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAALCAAAAACFLIiAAAAAAnRSTlMA/1uRIrUAAABNSURBVHgBY/j///+5vXDwDMSvbpkCBdl7wfxr/6GghzD/2d691Uv37v0O4+/NBhkU9R7O7wExkteCQTGcPwcC7iHUQwDDs61g8B3KBwCpQoQ9s4qd9gAAAABJRU5ErkJggg==" alt="" data-pagespeed-url-hash="1356203289" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a></div>Screenshot der Tilemap, die in diesem Tutorial programmiert wird.</div></div></div>
<p>Bevor wir uns an das Implementieren der Tilemap machen, klären wir 
noch, was genau das ist, wozu man sie benutzen kann und wie wir sie hier
 in dem Tutorial bauen werden.
Tilemaps werden häufig in 2D-Spielen verwendet. Sie sind eine einfache 
und schnelle Lösung, eine Landschaft oder ähnliches in einem Spiel 
darzustellen. Die Landschaft ist dabei aus zumeist gleich großen, 
quadratischen Kacheln (<i>Tiles</i>) zusammengesetzt, daher der Name. Mehrere, verschiedene Tile-Grafiken fasst man zu sogenannten <i>Tilesets</i>
 zusammen, damit kann man zum Beispiel während des Spiels einfach und 
schnell den Grafikstil ändern (etwa eine normale Gras-Grafik in eine 
Gras-mit-Schnee-Grafik) ändern. Um Platz zu sparen und um die Übersicht 
zu erhöhen, werden Tiles aus einem Set oftmals in einer einzigen 
Bilddatei gespeichert. Eine Tilemap speichert nun einfach eine Liste von
 Informationen, an welcher Position welches Tile liegt (zum Beispiel als
 2D-Array, bei dem in jedem Eintrag abgespeichert ist, welcher Tile-Typ 
dort zu finden ist).
</p>
<h4> <span class="mw-headline" id="Wie_gehen_wir_vor.3F"> Wie gehen wir vor? </span></h4>
<p>Unsere Tilemap wird folgendermaßen arbeiten: Wir verwenden eine Klasse names <tt>TileType</tt>,
 welche exakt einen Tile-Typ repräsentiert. Sie speichert die Position 
dieses Typs auf der Tileset-Grafik und seinen Namen. Hier ist außerdem 
der passende Ort, um weitere Informationen, wie etwa Begehbarkeit, 
"Tödlichkeit", Ereignisse usw. zu speichern. Die Klasse <tt>Tileset</tt>
 speichert in einem Dictionary (assoziatives Array) alle Tile-Typen, 
sowie die einheitliche Größe der Tiles. Und dazu noch die Grafik, auf 
der sämtliche Tiles vorhanden sind. Außerdem ermöglichen wir es, dass 
man diese Grafik einfach gegen eine andere austauschen kann. Ein 
Tile-Typ muss per Hand hinzugefügt werden – eine gute Gelegenheit um den
 Umgang mit den Datei-Funktionen von Python zu lernen ...
Zu guter Letzt haben wir noch eine Klasse namens <tt>Tilemap</tt>, die 
sich hauptsächlich um das Anzeigen der Tiles kümmert. Hier wird ein 
Tileset gespeichert, und natürlich eine Liste von Tiles. Die Liste 
implementieren wir als 2D-Array, in dem pro Eintrag die ID eines 
Tile-Types gespeichert ist.
</p>
<h3> <span class="mw-headline" id="Bilder_in_Pygame"> Bilder in Pygame </span></h3>
<h4> <span class="mw-headline" id="Los_geht.27s"> Los geht's </span></h4>
<p>Bevor wir uns an das Programmieren der Tilemap machen, schauen wir, 
wie Pygame uns mit den Bildern helfen kann. Mittels Pygame können wir 
sehr schnell und sehr einfach ein Bild laden:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1">image <span class="sy0">=</span> pygame.<span class="me1">image</span>.<span class="me1">load</span><span class="br0">(</span><span class="st0">"tolles_bild.bmp"</span><span class="br0">)</span></pre></div></div>
<p>Unterstützt werden dabei folgende Formate (<a href="http://www.pygame.org/docs/ref/image.html" class="external text">Auszug aus der Dokumentation</a>):
</p>
<ul><li> JPG
</li><li> PNG
</li><li> GIF (nicht animiert)
</li><li> BMP
</li><li> PCX
</li><li> TGA (unkomprimiert)
</li><li> TIF
</li><li> LBM (und PBM)
</li><li> PBM (und PGM, PPM)
</li><li> XPM
</li></ul>
<p>Da sollte jeder "sein" Format finden. Mit dem fertig geladenen Bild 
könnten wir jetzt bereits arbeiten, aber für den Einsatz in einem 
Spiel/Programm sollte das Bild noch optimiert werden. Vorher schauen wir
 uns aber noch an, wie das geladene Bild in Pygame repräsentiert wird.
</p>
<h4> <span class="mw-headline" id="Surfaces"> Surfaces </span></h4>
<p>Pygame speichert alles, was irgendwie angezeigt werden könnte, in so genannten <i>Surfaces</i>.
 Auch Bilder und der Bildschirm werden als Surface repräsentiert. Für 
jetzt ist erstmal wichtig, dass eine Surface oder Teile einer Surface 
auf andere Surfaces bzw. den Bildschirm kopiert werden können. Details 
dazu kommen später.
</p>
<h4> <span class="mw-headline" id="Formatkonvertierung"> Formatkonvertierung </span></h4>
<p>Beim Erstellen der Bildschirm-Surface können wir, falls gewünscht, 
die Farbtiefe des Fensters angeben, bzw. wird dies von Pygame 
automatisch erledigt. Wenn wir jetzt ein Bild anzeigen lassen wollen, 
das nicht in diesem Format gespeichert ist, muss Pygame das Bild bei 
jedem Anzeige-Vorgang konvertieren – das dauert unter Umständen recht 
lange. Je mehr Bilder, desto mehr leidet die Performance. Deshalb werden
 wir direkt nach dem Laden das Bild in das passende Format konvertieren,
 so dass diese langsame Umwandlung später nicht mehr nötig ist.
Dazu bietet Pygame gleich zwei Funktionen: eine für Bilder mit einem 
Alpha-Kanal (Transparenzwert pro Pixel) und eine für Bilder ohne. Da es 
auch eine Funktion gibt, die prüft, ob das Bild einen Alpha-Kanal hat, 
können wir das ohne Probleme automatisieren:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1"><span class="kw1">if</span> image.<span class="me1">get_alpha</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">is</span> <span class="kw2">None</span>:
    image <span class="sy0">=</span> image.<span class="me1">convert</span><span class="br0">(</span><span class="br0">)</span>
<span class="kw1">else</span>:
    image <span class="sy0">=</span> image.<span class="me1">convert_alpha</span><span class="br0">(</span><span class="br0">)</span></pre></div></div>
<h4> <span class="mw-headline" id="Alles_nur_rechteckig.3F"> Alles nur rechteckig? </span></h4>
<p>Wer die bisherige Ladefunktion schon getestet hat, wird festgestellt 
haben, dass wir immer nur Rechtecke anzeigen können. Das ist für ein 
echtes Spiel natürlich zu wenig, da die wenigsten Figuren rechteckig 
aussehen. Um dieses Problem zu lösen, bietet Pygame natürlich die 
bekannte Colorkey-Methode, in der eine bestimmte Farbe beim Anzeigen 
eines Bildes einfach ausgelassen wird. Das festlegen des Colorkeys unter
 Pygame ist auch sehr einfach realisierbar:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1">image.<span class="me1">set_colorkey</span><span class="br0">(</span><span class="br0">(</span>rot<span class="sy0">,</span> grün<span class="sy0">,</span> blau<span class="br0">)</span><span class="sy0">,</span> pygame.<span class="me1">RLEACCEL</span><span class="br0">)</span></pre></div></div>
<p>Sehr oft wird als Colorkey die Farbe Magenta (255, 0, 255) verwendet, da man sie selten in einem Bild benötigt.
</p>
<h4> <span class="mw-headline" id="Zusammengesetzt:_ein_Bild_laden"> Zusammengesetzt: ein Bild laden </span></h4>
<p>Und hier nochmal die gesamte Funktion zum Laden eines Bilds mit Pygame:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="5"><li class="li1"><pre class="de1"><span class="co1"># Hilfsfunktion, um ein Bild zu laden:</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">def</span> loadImage<span class="br0">(</span>filename<span class="sy0">,</span> colorkey<span class="sy0">=</span><span class="kw2">None</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Pygame das Bild laden lassen.</span></pre></li><li class="li1"><pre class="de1">    image <span class="sy0">=</span> pygame.<span class="me1">image</span>.<span class="me1">load</span><span class="br0">(</span>filename<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Das Pixelformat der Surface an den Bildschirm (genauer: die screen-Surface) anpassen.</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Dabei die passende Funktion verwenden, je nach dem, ob wir ein Bild mit Alpha-Kanal haben oder nicht.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">if</span> image.<span class="me1">get_alpha</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">is</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">        image <span class="sy0">=</span> image.<span class="me1">convert</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">        image <span class="sy0">=</span> image.<span class="me1">convert_alpha</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Colorkey des Bildes setzen, falls nicht None.</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Bei -1 den Pixel im Bild an Position (0, 0) als Colorkey verwenden.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">if</span> colorkey <span class="kw1">is</span> <span class="kw1">not</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> colorkey <span class="kw1">is</span> -<span class="nu0">1</span>:</pre></li><li class="li1"><pre class="de1">            colorkey <span class="sy0">=</span> image.<span class="me1">get_at</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        image.<span class="me1">set_colorkey</span><span class="br0">(</span>colorkey<span class="sy0">,</span> pygame.<span class="me1">RLEACCEL</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="kw1">return</span> image</pre></li></ol></div></div>
<p>Wir haben noch einen kleinen Zusatz eingebaut: Wenn der Colorkey auf 
-1 gesetzt ist, verwenden wir automatisch die Farbe des Pixels an 
Position (0, 0) als Colorkey, und wenn der Colorkey auf <tt>None</tt> gesetzt ist (was standardmäßig der Fall ist), dann wird überhaupt kein Colorkey gesetzt.
</p>
<h4> <span class="mw-headline" id="Bild_anzeigen"> Bild anzeigen </span></h4>
<p>Ein Bild können wir, wie bereits erwähnt, entweder direkt auf den 
Bildschirm rendern oder auf ein andere Surface. Diese Methode nennt sich
 <i>Bit Block Transfer</i>. Jede Surface besitzt eine Funktion namens <tt>blit</tt>, mit der eine andere Surface auf sie kopiert werden kann.
In der Standardvariante wird eine komplette Surface an eine bestimmte Position geblittet:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1">screen.<span class="me1">blit</span><span class="br0">(</span>image<span class="sy0">,</span> <span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span></pre></div></div>
<p>Damit wird die Surface <tt>image</tt> an der Position (0, 10) auf die Surface <tt>screen</tt> geblittet (<tt>screen</tt> ist hier die Surface, die zum Anzeigen auf dem Bildschirm verwendet wird).
</p>
<h4> <span class="mw-headline" id="Mehr_zu_Surfaces"> Mehr zu Surfaces </span></h4>
<p>Jetzt können wir Bilder laden, optimieren und anzeigen. Wem das 
reicht, der kann gleich zum nächsten Abschnitt springen. Alle Anderen 
bekommen jetzt noch ein paar Details zu Surfaces (und noch viel mehr 
gibt's <a href="http://www.pygame.org/docs/ref/surface.html" class="external text">hier</a>).
 In den meisten Fällen erstellt man eine Surface durch das Laden eines 
Bilds. Falls nötig, kann man aber auch eine "per Hand" erstellen (etwa 
um einen Puffer zu haben). Dafür stehen zwei Funktionen zur Verfügung:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1">pygame.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span>width<span class="sy0">,</span> height<span class="br0">)</span><span class="sy0">,</span> flags<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> depth<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> masks<span class="sy0">=</span><span class="kw2">None</span><span class="br0">)</span>: <span class="kw1">return</span> Surface
pygame.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span>width<span class="sy0">,</span> height<span class="br0">)</span><span class="sy0">,</span> flags<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> Surface<span class="br0">)</span>: <span class="kw1">return</span> Surface</pre></div></div>
<p>Als Flags können wir "anfragen" (das heißt, unter Umständen ignoriert
 SDL diese Anfrage, wenn es Probleme geben könnte), dass die Surface im 
Grafikkartenspeicher abgelegt werden soll (Flag <tt>HWSURFACE</tt>) und/oder dass wir einen Alpha-Kanal haben möchten (Flag <tt>SRCALPHA</tt>).
Letzteres
 könnte langsam sein. In den meinsten Fällen ist es aber zum Glück nicht
 nötig, da man Colorkeys und einen Transparenzwert für die komplette 
Surface angeben kann.
Die wichtigste Funktion einer Surface ist wohl die <tt>blit</tt>-Funktion (<a href="http://www.pygame.org/docs/ref/surface.html#Surface.blit" class="external text">Dokumentation</a>),
 die wir schon kurz angeschaut haben. Sie ermöglicht es, andere Surfaces
 (bzw. Ausschnitte daraus) auf eine andere zu kopieren:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1">Surface.<span class="me1">blit</span><span class="br0">(</span>source<span class="sy0">,</span> dest<span class="sy0">,</span> area<span class="sy0">=</span><span class="kw2">None</span><span class="sy0">,</span> special_flags <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">)</span>: <span class="kw1">return</span> Rect</pre></div></div>
<p>Der Parameter <tt>source</tt> ist die Surface, die ganz oder teilweise kopiert werden soll. Über den zweiten Parameter, <tt>dest</tt>, kann der Zielbereich angegeben werden, in den kopiert wird. Entweder als ein Tupel von Zahlen <tt>(x, y)</tt> oder als eine <tt>Rect</tt>-Variable.
 Um nur Ausschnitte von einer Surface zu kopieren (unerlässlich für 
unsere Tilemap), benötigt man den dritten Parameter, <tt>area</tt>. Er erwartet eine <tt>Rect</tt>-Variable, die den kleineren Ausschnit definiert. Über den <tt>special_flags</tt>-Parameter kann man Überblendungseffekte beim Kopieren einbauen (<tt>BLEND_ADD</tt>, <tt>BLEND_SUB</tt>, <tt>BLEND_MULT</tt>, <tt>BLEND_MIN</tt>, <tt>BLEND_MAX</tt>).
Weitere wichtige Funktionen sind <tt>get_width</tt> und <tt>get_height</tt> zum Ermitteln der Größe der Surface, sowie <tt>fill</tt>, um die Surface mit einer Farbe komplett zu füllen.
</p><p>Das soll erstmal genug sein, jetzt kommen wir zum Programmieren der Tilemap.
</p>
<h3> <span class="mw-headline" id="Jetzt_aber_zur_Tilemap"> Jetzt aber zur Tilemap </span></h3>
<p>Hinweis: Die Zeilennummern stimmen mit den fertigen Dateien überein, den gesamten Code findest du am Ende dieses Teiles.
</p>
<h4> <span class="mw-headline" id="Die_Klasse_TileType"> Die Klasse TileType </span></h4>
<p>Dies ist die einfachste und kleinste Klasse. Deshalb zuerst der Code:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="5"><li class="li1"><pre class="de1"><span class="co1"># Speichert die Daten eines Tile-Typs:</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> TileType<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Im Konstruktor speichern wir den Namen</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># und erstellen das Rect (den Bereich) dieses Typs auf der Tileset-Grafik.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> name<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">name</span> <span class="sy0">=</span> name</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">rect</span> <span class="sy0">=</span> pygame.<span class="me1">rect</span>.<span class="me1">Rect</span><span class="br0">(</span>start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span></pre></li></ol></div></div>
<p>Wir speichern als erstes den Namen bzw. die ID des Tile-Typs in der Variable <tt>name</tt>.
In einem <tt>Rect</tt> speichern wir gleichzeitig die Position und die Größe dieses Types in der Tileset-Grafik.
Wir gehen gleich zur nächsten Klasse weiter, der <tt>Tileset</tt>-Klasse, in der deutlich mehr passiert.
</p>
<h4> <span class="mw-headline" id="Die_Klasse_Tileset"> Die Klasse Tileset </span></h4>
<p>Hier in der <tt>Tileset</tt>-Klasse müssen wir vor allem die 
Tile-Typen speichern. Der Konstruktor der Klasse erwartet einen 
Dateinamen für das Bild der Tiles, dazu einen Colorkey für das Bild 
sowie die Breite und Höhe eines Tiles (alle Tiles haben die gleiche 
Größe).
Zuletzt wird noch ein Dictionary für die Tile-Typen angelegt, das aber 
erst einmal leer bleibt.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="7"><li class="li1"><pre class="de1"><span class="co1"># Verwaltet die Tileset Grafik und eine Liste mit Tile-Typen.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Tileset<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Im Konstruktor laden wir die Grafik</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># und erstellen ein leeres Dictionary für die Tile-Typen.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> image<span class="sy0">,</span> colorkey<span class="sy0">,</span> tile_width<span class="sy0">,</span> tile_height<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> Utils.<span class="me1">load_image</span><span class="br0">(</span>image<span class="sy0">,</span> colorkey<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_width</span> <span class="sy0">=</span> tile_width</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_height</span> <span class="sy0">=</span> tile_height</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_types</span> <span class="sy0">=</span> <span class="kw2">dict</span><span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Die <tt>loadImage</tt>-Funktion haben wir in das Modul <tt>Utils</tt> ausgelagert. Also das <tt>import Utils</tt> am Anfang des Moduls nicht vergessen.
</p><p>Kommen wir zur wichtigsten Funktion: Das Hinzufügen eines 
Tile-Typen. Das ist im Grunde auch nicht sonderlich kompliziert. Wir 
fügen einfach eine neue Instanz der <tt>TileType</tt>-Klasse in unser Dictionary ein, mit passenden Parametern:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="17"><li class="li1"><pre class="de1">    <span class="co1"># Neuen Tile-Typ hinzufügen.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> add_tile<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> name<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_types</span><span class="br0">[</span>name<span class="br0">]</span> <span class="sy0">=</span> TileType.<span class="me1">TileType</span><span class="br0">(</span>name<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">tile_width</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">tile_height</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Auch das Abfragen eines Types ist leicht, einfach über den Key den passenden Wert zurückliefern:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="21"><li class="li1"><pre class="de1">    <span class="co1"># Versuchen, einen Tile-Type über seinen Namen in der Liste zu finden.</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Falls der Name nicht existiert, geben wir None zurück.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> get_tile<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> name<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw1">try</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">tile_types</span><span class="br0">[</span>name<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">except</span> <span class="kw2">KeyError</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw1">return</span> <span class="kw2">None</span></pre></li></ol></div></div>
<p>Möglicherweise existiert der angegebene Schlüssel nicht. Wir fangen die Exception ab und geben dann einfach <tt>None</tt> zurück.
Damit kommen wir zu der eigentlichen <tt>Tilemap</tt>-Klasse.
</p>
<h4> <span class="mw-headline" id="Die_Klasse_Tilemap"> Die Klasse Tilemap </span></h4>
<p>Wir beginnen wieder mit dem Konstruktor:
</p>
<div class="thumb tright"><div class="thumbinner" style="width:130px;"><a href="https://www.spieleprogrammierer.de/wiki/Datei:Pygame-Tutorial_Tileset.png" class="image"><img alt="" src="data:image/webp;base64,UklGRoYLAABXRUJQVlA4IHoLAAAwLgCdASqAAIAAPm0uk0YkIqGhLBgLmIANiWZEeFAAMr7Xf6f+OXfpZW6X+In49dHBvr8k/JP49dFvYf5K95noU8wD+99ADneP7T/mf4B7qv1z/unuAfzf/Aesj6hXoAfrl6Vf7HfBR+037b/Aj+1X//9gDXUP672if37wb8f0GHDH1I6jXbXjJ3m8AL2R5dzxTkV8z6AVmnqEeBufH/VeA39k9QD+bf5z0P83L1p7BH6/9bP0Sf18Hu3JRumGMUVdQCJ3vAKQuQ/Ozhzc2hoGXw3PXecHm6c9Nx3VnbzXzjJFRCpXvZTv+shKI9kqsvxYixpC6edu0D2uH3eD5gyvZgVPz3MmGplW/6N4V/eMddjPaIMB5fZl6qh6B9Zo+JyKOFcHdiRZAki1OmWMN9HTRyWJ7HuuoxNvUXuPr+DbLJFKfq8t/YmRo7IyQX4BdxrZBCnLweFF0pPX03MrOpNO5+fRXPlLBOXEO76ss1fAiNwpTPJhfYkwmUAA/J2KVX2GOsIz8ej5AdD0amWVY5iT89NlctOO4koUxQVHbPLn7fuwGp3scE4JO6wlZG2+eVL4LrTytTtYMpUS7PcqobLHaRukkkNsWBoGlgAl/maRuPKMNy2ULb5Q3XgP4gNLB6qHRFS+zoZFbL2ftIy/B0jpthLG99A4VdsXZoNaoHIT+Lco0Z8rjB0FjXB+fSDmFXoiJ7M9H5VxOdlG7hlcchiP7kqIEvjcUeVzzS3vF3AzjdAdro59K4eAMXcSdg8z2l793KxRmCVJWVebFdXhNUmYP/q063kUpvVLMsnyYBjZY7SNwbuPEZE0mlwjJlezPm8LZrhXtbFxTvloslSn3PhMawhBu2X/Ra1iFxh5liKjDa9zK47gawcLxA0QsWVDcuPOi+RsxreX0McGrAi/AfbmmviQCclE3OblPFrA1hknXePstMyG/Z6MfJa3YbB6LXhE6huZDTxIqgcuYtQPppmp9H1iKA3WXvOAH6oNfAGAMXd7+ruqrDTWLbRcRGWYXB3vi+53/DvTPyUGwhJ0nuMgIY/t9mO7d46N9GiOuPgWmuh6jMUbfyGb+rJUqJz3sdrgTVGSb1wrTTSnNjtk/9PKKSQkdWsJ6UFKlVa+cUrOFXbF2dAhcL4hP4tzLc8ddfrukIPsDWYw53AWMCh5htGWQZd+BWPrNZ3Az0KH0KHoJgofnh5PiLKX+G7Htwb9MudWZ6Umk9Sy5QD+Kw9ntagCd7l1QbJOMX7Zl2gJm3xqFu3vprPVNQy2yiNIV9WWTmxb3SRn1R4ePbRR0jLHbziv9XnXlbdemDixsV7JUszSE9+WjCESLqEXsz8TJI+qcdD7OoJyTf7d+nUFOOMS48OKOojOOYMCRRtn+MNKXOjk/qBCBG67hrHB9cGvVuXzNOjrzbFondnapPK7FVii5VGPHkysLknDpw4+Hp994yO22Gv+44P3xZXGYxiA3R9vsRLDwUCjMoDd+RevEPPIQrEFzEXl/nwn7A+TIpiMXI4ZZPttM1VX2eg/mIj/HSildrlFZytx35mHYCRwR9+kvuIOjh0gJpXyoD5bPLxf4JjhTxboTbvmqobPOxfuFCiAGidiAokMEecRWyO2cbSco07+TtknUDUIu5AiNqnVGxVGwf0L0DkpvwOsVvZI4wXpJh5kkSl6MJZj3YFY8kjjzKXzHX78sIdinn7Ems5f7b36waHjH16y/bksNPOqkdnl2mL1EN0dvWvneaY0U3YAyYN6LBIUFNfuOV9tyfCPnuLtf3TNhqbpITW0faWesLuOU2Jes/Ug5tIOqf9HCnWALV+3TtD+YTQ6HScsN4mWakRtSWgLiqxci7qZ8lVNCgTXuHTOziacf0p/LEubAc0aJupisgg+mBBtQ5sfCJubtx3eUuQGMt8CCQnrP27K4SrmoOJxOviujSa2zy22KjSr/ZRDRF+w5ppTeK74igqHZu1GRyfhYA/EIkk7dLl86M9uEB2IENeRpa8BkDu+s7P/lbXEo4NNuqYF1SBYbBe3vP2mLKrLQyYGwaB+/pskFoDY93PXgOX27i+MpnYF3l7Gi4vxlKXU/XNyXGte7gj+a8X4IRMee/sEonireqEHi0h26hhh6hKO1gtn4GBYVY9Lg6Sg561bJaB1moyvV2sK/AgxSA79DGeR3a/Jeo8BlGEVRwIqLb8rXDc7zlPcD2M4n0XvYXEdJvLVCegQA5UJNoVZnrgWmaNz1ts83AmO5rrcss2wcj5HOGmbUW1IZVc2nuPKT2wLP464Sd2XUCe6oqDUmmz54/qDsZLGVnhcP1h9MLTyYW0oJMfknEMCn332APkfMbnf6n3q5T05QuBNyOgjGhxoYI+7/aFHlyogjiMxGtDvgnKK3h3193Jl0OzI3oBdZjNsTet3qhT4HsZxPNRfGLwQ/iqZuNj5H8qEm0Ks28wl5KPjKRmRo6ECCd8H4w0dPcftyN4XjfGO4aMu3yIr9hzVeGdunQxjHYoHNL4myPEoBTLzknqLkzs8YsKw6//SSneyUP7hXy77TB5ppBjwNcfNW4V4nrU675ZC9JnJAjMV8FqvR6aDoltJF61yDDusg88F/cRnmckoR3V4TcVbYKkwdNROturez9mdkjFP7SAFInHG37Uaz3vILaOA0fQxZAER4na/I55n20eQZ/BZS//kkDv8n3eT9+uy+XNBb8yxeKDYhSCAfbBgdIUzgqJddQEvQd2Ax+S3CuEYFwGgAmZXGDv3g+pH1z/uAEM8HVyQ33YNagDYfN+KH2z+6MTtkZXNk//1FfcdCshYd2Xpvnm004M+W+lMEf/4M75P367L5c0FvzLF4oNiCyAQc+owU1WPVvH27uewexSdv/ymNOninX5F+T/WaRdOaT9DAUnqqrjKaTsQPFCZ+VRjs6xOf2+UD+D5WyS1cNcXoPVVWHpJ/ciAdFUdXXNvYjD5Keb5xgGyxgxYlwExry9zIjC3/wZUvyoNjm+0W7VMHQEgdBZ6L9Kjg3X4HBYHDqfPZccc70kGAIiQM4g2l6wOHBQFlx+jLvg2ltlBQqEVTUU/H/p3enpUi9YnhBIFTW29bLO1eb6b1t152knSWrioqhTDVYKDWmxveEoedXk70Ps7rfNxDsemDxRgAmup/hTCo7f27kcs9MwgnVxHxD8v7/UM8VrYSD48WaK10LFDk2xrKusBthSRSgVicyoO5BWz1VZfVvJXlI6bcaOY8JlaIPnWR8xzyjQUhQuKXJHvtOJ8Cy18UC7GpzZ/SSrpRdnUwTpRUtiMr8+LrYl3b/ygIpInwtxztuxQRaPvOGTashP5j61tb0+/RgVq8BI4AB2XUW2tySMmo3AtMKYK490Wh8zVzDJK71F5mNQYlI5AUFh4Qi0vKGW6bODBOfQYjTSjkcGR3lYDDO1l7P3QgQYRkPbl353vAKEO1KbL3FX8bKmrw8bxi9PKKtUMztU+2urK0iJcjahwc94WfAGxhseCjh8PGPMaepE5SkdLcJNyfq4xtYdSztMa6x56x4vZU/pkz+E5t3aMywpcD/WD2aIYCDUmB+Gq7XuS/HwTxmkeKfB3caacTN/yHSAGvTouqOyT8JCSMlC6e8YxjMQP6ryZjw8RDWczG1WaPku1fLt79go5wsmDUlTDCYbFQjPyGeDmUj0EesejCo0fzc+3E1F0sN0JSnONVruGOBJwCHg/aqLEmB4P50tN9CQ3rGxZONFccax2saRvPFR2rRM4Gw8jJbxlVeOR+RSgW6xOPScR2aafxsI3nQYkedG0fUa9HrstuRieIqmYp1UmFPxeDtSBx2G/BmvH1aXeQQnJvjqTIffrdtyQkBWhGhdvyJueV+906hfv7U/mgHNFpU5e+RKvdl9l2oKSR6ElnIkQ5x3jE7vWfqwrpl7MgPyA/kB+QFut0ONwACm4PAAAAAAA" class="thumbimage" data-pagespeed-url-hash="2549804795" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a> <div class="thumbcaption"><div class="magnify"><a href="https://www.spieleprogrammierer.de/wiki/Datei:Pygame-Tutorial_Tileset.png" class="internal" title="vergrößern"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAALCAAAAACFLIiAAAAAAnRSTlMA/1uRIrUAAABNSURBVHgBY/j///+5vXDwDMSvbpkCBdl7wfxr/6GghzD/2d691Uv37v0O4+/NBhkU9R7O7wExkteCQTGcPwcC7iHUQwDDs61g8B3KBwCpQoQ9s4qd9gAAAABJRU5ErkJggg==" alt="" data-pagespeed-url-hash="1356203289" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a></div>Die verwendete Tileset-Grafik.</div></div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="7"><li class="li1"><pre class="de1"><span class="co1"># Die Tilemap Klasse verwaltet die Tile-Daten, die das Aussehen der Karte beschreiben.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Tilemap<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Wir erstellen ein neues Tileset.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Hier im Tutorial fügen wir manuell vier Tile-Typen hinzu.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span> <span class="sy0">=</span> Tileset.<span class="me1">Tileset</span><span class="br0">(</span><span class="st0">"tileset.png"</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"grass"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"mud"</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"water"</span><span class="sy0">,</span> <span class="nu0">64</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"block"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">32</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Es fällt natürlich sofort auf, dass das ziemlich unflexibel ist. Ein 
deutlich besserer Weg wäre es, sämtliche Informationen aus einer Datei 
zu lesen. Aufgrund der Einfachheit dieses Tutorials werden wir aber 
davon absehen und überlassen dem Leser die Verbesserung!
Was passiert: Wir erstellen eine neue Instanz der <tt>Tileset</tt>-Klasse,
 übergeben ein passendes Bild, den Colorkey und die Größe eines einzelne
 Tiles (32x32 Pixel). Danach fügen wir per Hand vier Tile-Typen hinzu.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="18"><li class="li1"><pre class="de1">        <span class="co1"># Festlegen der Startposition der Kamera. Hier (0, 0).</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">camera_x</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">camera_y</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Größe der Maps in Tiles.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">width</span> <span class="sy0">=</span> <span class="nu0">30</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">height</span> <span class="sy0">=</span> <span class="nu0">25</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Erstellen einer leeren Liste für die Tile Daten.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tiles</span> <span class="sy0">=</span> <span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Wir legen Standardwerte für die Position der Kamera und die Größe der
 Karte fest. Die Größe der Karten wird in Tiles angegeben, nicht in 
Pixeln. Auch hier gilt wieder: Die Größe kann flexibler gestaltet 
werden, etwa durch einen Parameter in dem Konstruktor oder eine Datei. 
Zudem erstellen wir eine noch leere Liste, in der wir später die Tiles 
speichern wollen.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="29"><li class="li1"><pre class="de1">        <span class="co1"># Manuelles Befüllen der Tile-Liste:</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Jedes Feld bekommt ein zufälliges Tile zugewiesen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">height</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">tiles</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> j <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">width</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                x <span class="sy0">=</span> <span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">4</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> x <span class="sy0">==</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"grass"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> x <span class="sy0">==</span> <span class="nu0">1</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"water"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> x <span class="sy0">==</span> <span class="nu0">2</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"mud"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"block"</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Mit diesem Code endet der Konstruktor. Wir befüllen hier die Liste der Tiles. Dazu verwenden wir zwei <tt>for</tt>-Schleifen, die die Höhe bzw. Breite der Karte durchlaufen. Für jedes <tt>i</tt>
 (eine Zeile) erstellen wir eine neue Liste, die wir mit Zufallswerten 
füllen (hier gibt es eine Auswahl zwischen den vier hinzugefügten 
Tiles). Standardmäßig sollte hier jedes Feld auf <tt>""</tt> oder <tt>None</tt> gesetzt werden, oder man liest gleich alle Positionsdaten aus einer Datei.
Schauen wir uns die komplizierteste, aber auch wichtigste Funktion an: Die Funktion <tt>render</tt>, die die Karte auf den Bildschirm (oder eine beliebige andere Surface rendert):
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="45"><li class="li1"><pre class="de1">    <span class="co1"># Hier rendern wir den sichtbaren Teil der Karte.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Zeilenweise durch die Tiles durchgehen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> y <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>screen.<span class="me1">get_height</span><span class="br0">(</span><span class="br0">)</span> / <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_height</span><span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Die Kamera Position mit einbeziehen.</span></pre></li><li class="li1"><pre class="de1">            ty <span class="sy0">=</span> y + <span class="kw2">self</span>.<span class="me1">camera_y</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> ty <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">height</span> <span class="kw1">or</span> ty <span class="sy0">&lt;</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw1">continue</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Die aktuelle Zeile zum einfacheren Zugriff speichern.</span></pre></li><li class="li1"><pre class="de1">            line <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>ty<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Und jetzt spaltenweise die Tiles rendern.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>screen.<span class="me1">get_width</span><span class="br0">(</span><span class="br0">)</span> / <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_width</span><span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Auch hier müssen wir die Kamera beachten.</span></pre></li><li class="li1"><pre class="de1">                tx <span class="sy0">=</span> x + <span class="kw2">self</span>.<span class="me1">camera_x</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> tx <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">width</span> <span class="kw1">or</span> tx <span class="sy0">&lt;</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw1">continue</span></pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wir versuchen, die Daten des Tiles zu bekommen.</span></pre></li><li class="li1"><pre class="de1">                tilename <span class="sy0">=</span> line<span class="br0">[</span>tx<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">                tile <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">get_tile</span><span class="br0">(</span>tilename<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="co1"># Falls das nicht fehlschlägt können wir das Tile auf die screen-Surface blitten.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> tile <span class="kw1">is</span> <span class="kw1">not</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">                    screen.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="br0">(</span>x * <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_width</span><span class="sy0">,</span> y * <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_height</span><span class="br0">)</span><span class="sy0">,</span> tile.<span class="me1">rect</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Wir werden die Funktion Zeile für Zeile durchgehen:
</p>
<ul><li> Zeile 48: Wir wollen nur so viele Tiles rendern, wie auf den 
Bildschirm passen. Um das herauszufinden, dividieren wir einfach die 
Höhe des Bildschirms durch die Höhe der Tiles. Um schwarze Rahmen zu 
vermeiden, addieren wir noch 1 hinzu.
</li><li> Zeile 50: Die y-Position auf dem Bildschirm ist nicht gleich 
der Position in unserer Tile-Liste, diese Position speichern wir in der 
Variable <tt>ty</tt>. Um den korrekten Wert zu erhalten, müssen wir nur die Kameraposition hinzuaddieren.
</li><li> Zeile 51: Wir testen, ob wir uns überhaupt noch innerhalb der 
Map-Grenze befinden. Wenn nicht, überspringen wir das aktuelle Tile.
</li><li> Zeile 54: Die Tiles werden gleich spaltenweise gerendert, hier speichern wir die aktuelle Zeile.
</li><li> Zeile 56: In der zweiten <tt>for</tt>-Schleife durchlaufen wie die Breite des Bildschrims.
</li><li> Zeile 58: Auch die x-Position wird berechnet, genau wie die y-Position.
</li><li> Zeile 59: Natürlich muss auch hier getestet werden, ob wir die Grenzen der Map einhalten.
</li><li> Zeile 62: Als Nächstes holen wir uns den Namen des Tiles, das wir rendern wollen, aus der aktuellen Zeile.
</li><li> Zeile 63: Über das Tileset erhalten wir das Tile, oder <tt>None</tt>, wenn keines existiert.
</li><li> Zeile 65: Und wenn wir ein Tile haben, wird dieses auf den Bildschrim gerendert.
</li><li> Zeile 66: In der Tilemap ist das Bild mit allen Tiles gespeichert, das ist unsere Quelle für die <tt>blit</tt>-Funktion.
 Die Positionen multiplizieren wir noch mit der Größe der Tiles, um 
keine Überschneidung mit dem vorherigen Tile zu bekommen. Zuletzt der 
wichtigste Parameter: Der Ausschnitt, der von dem Bild verwendet werden 
soll, ist in der Tile-Klasse gespeichert.
</li></ul>
<p>Damit sind wir fast fertig.
Die Veränderung der Kameraposition ist im Gegensatz zur letzten Funktion sehr einfach:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="69"><li class="li1"><pre class="de1">    <span class="co1"># Tastendrücke verarbeiten:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> handle_input<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Pfeiltaste links oder rechts erhöht bzw. verringert die x-Position der Kamera.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_LEFT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_x</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_RIGHT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_x</span> -<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und das gleiche nochmal für die y-Position.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_UP</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_y</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_DOWN</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_y</span> -<span class="sy0">=</span> <span class="nu0">1</span></pre></li></ol></div></div>
<h4> <span class="mw-headline" id="Tilemap_anzeigen_lassen"> Tilemap anzeigen lassen </span></h4>
<p>Für dieses Tutorial sind wir jetzt mit der Tilemap fertig. Für ein 
kleines 2D-Spiel kann man sie gut als Grundlage verwenden und noch etwas
 verbessern. Etwa durch mehrere Layer, weitere Informationen der 
einzelne Tiles (eine eigene <tt>Tile</tt>-Klasse zum Beispiel) und natürlich Auslesen der Map-Daten aus einer Datei.
Zum Schluss bauen wir die Tilemap noch in das Skript aus dem letzten Tutorial ein. Zuerst erstellen wir eine Tilemap:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="28"><li class="li1"><pre class="de1">    <span class="kw2">map</span> <span class="sy0">=</span> Tilemap.<span class="me1">Tilemap</span><span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>In der Event-Schleife geben wir die gedrückten Tasten an die Map weiter:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="53"><li class="li1"><pre class="de1">                <span class="kw2">map</span>.<span class="me1">handle_input</span><span class="br0">(</span>event.<span class="me1">key</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Und direkt vor dem Anzeigen des Bildpuffers rendern wir die Map:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="56"><li class="li1"><pre class="de1">        <span class="kw2">map</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="br0">)</span></pre></li></ol></div></div>
<h4> <span class="mw-headline" id=".C3.9Cberblick"> Überblick </span></h4>
<p>Und hier nochmal der gesamte Code im Überblick:
</p><p><tt>Utils.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Hilfsfunktion, um ein Bild zu laden:</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">def</span> load_image<span class="br0">(</span>filename<span class="sy0">,</span> colorkey<span class="sy0">=</span><span class="kw2">None</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Pygame das Bild laden lassen.</span></pre></li><li class="li1"><pre class="de1">    image <span class="sy0">=</span> pygame.<span class="me1">image</span>.<span class="me1">load</span><span class="br0">(</span>filename<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Das Pixelformat der Surface an den Bildschirm (genauer: die screen-Surface) anpassen.</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Dabei die passende Funktion verwenden, je nach dem, ob wir ein Bild mit Alpha-Kanal haben oder nicht.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">if</span> image.<span class="me1">get_alpha</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">is</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">        image <span class="sy0">=</span> image.<span class="me1">convert</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">        image <span class="sy0">=</span> image.<span class="me1">convert_alpha</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Colorkey des Bildes setzen, falls nicht None.</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Bei -1 den Pixel im Bild an Position (0, 0) als Colorkey verwenden.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">if</span> colorkey <span class="kw1">is</span> <span class="kw1">not</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> colorkey <span class="kw1">is</span> -<span class="nu0">1</span>:</pre></li><li class="li1"><pre class="de1">            colorkey <span class="sy0">=</span> image.<span class="me1">get_at</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        image.<span class="me1">set_colorkey</span><span class="br0">(</span>colorkey<span class="sy0">,</span> pygame.<span class="me1">RLEACCEL</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="kw1">return</span> image</pre></li></ol></div></div>
<p><tt>TileType.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Speichert die Daten eines Tile-Typs:</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> TileType<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Im Konstruktor speichern wir den Namen</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># und erstellen das Rect (den Bereich) dieses Typs auf der Tileset-Grafik.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> name<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">name</span> <span class="sy0">=</span> name</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">rect</span> <span class="sy0">=</span> pygame.<span class="me1">rect</span>.<span class="me1">Rect</span><span class="br0">(</span>start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span></pre></li></ol></div></div>
<p><tt>Tileset.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Utils</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> TileType</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Verwaltet die Tileset Grafik und eine Liste mit Tile-Typen.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Tileset<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Im Konstruktor laden wir die Grafik</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># und erstellen ein leeres Dictionary für die Tile-Typen.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> image<span class="sy0">,</span> colorkey<span class="sy0">,</span> tile_width<span class="sy0">,</span> tile_height<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> Utils.<span class="me1">load_image</span><span class="br0">(</span>image<span class="sy0">,</span> colorkey<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_width</span> <span class="sy0">=</span> tile_width</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_height</span> <span class="sy0">=</span> tile_height</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_types</span> <span class="sy0">=</span> <span class="kw2">dict</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Neuen Tile-Typ hinzufügen.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> add_tile<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> name<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tile_types</span><span class="br0">[</span>name<span class="br0">]</span> <span class="sy0">=</span> TileType.<span class="me1">TileType</span><span class="br0">(</span>name<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">tile_width</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">tile_height</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Versuchen, einen Tile-Type über seinen Name in der Liste zu finden.</span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Falls der Name nicht existiert, geben wir None zurück.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> get_tile<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> name<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="kw1">try</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">tile_types</span><span class="br0">[</span>name<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">except</span> <span class="kw2">KeyError</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw1">return</span> <span class="kw2">None</span></pre></li></ol></div></div>
<p><tt>Tilemap.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> <span class="kw3">random</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Tileset</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Die Tilemap Klasse verwaltet die Tile-Daten, die das Aussehen der Karte beschreiben.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Tilemap<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Wir erstellen ein neues Tileset.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Hier im Tutorial fügen wir manuell vier Tile-Typen hinzu.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span> <span class="sy0">=</span> Tileset.<span class="me1">Tileset</span><span class="br0">(</span><span class="st0">"tileset.png"</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"grass"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"mud"</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"water"</span><span class="sy0">,</span> <span class="nu0">64</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"block"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">32</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Festlegen der Startposition der Kamera. Hier (0, 0).</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">camera_x</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">camera_y</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Größe der Maps in Tiles.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">width</span> <span class="sy0">=</span> <span class="nu0">30</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">height</span> <span class="sy0">=</span> <span class="nu0">25</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Erstellen einer leeren Liste für die Tile Daten.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tiles</span> <span class="sy0">=</span> <span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Manuelles Befüllen der Tile-Liste:</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Jedes Feld bekommt ein zufälliges Tile zugewiesen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">height</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">tiles</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> j <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">width</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                x <span class="sy0">=</span> <span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">4</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> x <span class="sy0">==</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"grass"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> x <span class="sy0">==</span> <span class="nu0">1</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"water"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> x <span class="sy0">==</span> <span class="nu0">2</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"mud"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"block"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Hier rendern wir den sichtbaren Teil der Karte.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Zeilenweise durch die Tiles durchgehen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> y <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>screen.<span class="me1">get_height</span><span class="br0">(</span><span class="br0">)</span> / <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_height</span><span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Die Kamera Position mit einbeziehen.</span></pre></li><li class="li1"><pre class="de1">            ty <span class="sy0">=</span> y + <span class="kw2">self</span>.<span class="me1">camera_y</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> ty <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">height</span> <span class="kw1">or</span> ty <span class="sy0">&lt;</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw1">continue</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Die aktuelle Zeile zum einfacheren Zugriff speichern.</span></pre></li><li class="li1"><pre class="de1">            line <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>ty<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Und jetzt spaltenweise die Tiles rendern.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>screen.<span class="me1">get_width</span><span class="br0">(</span><span class="br0">)</span> / <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_width</span><span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Auch hier müssen wir die Kamera beachten.</span></pre></li><li class="li1"><pre class="de1">                tx <span class="sy0">=</span> x + <span class="kw2">self</span>.<span class="me1">camera_x</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> tx <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">width</span> <span class="kw1">or</span> tx <span class="sy0">&lt;</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw1">continue</span></pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wir versuchen, die Daten des Tiles zu bekommen.</span></pre></li><li class="li1"><pre class="de1">                tilename <span class="sy0">=</span> line<span class="br0">[</span>tx<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">                tile <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">get_tile</span><span class="br0">(</span>tilename<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="co1"># Falls das nicht fehlschlägt können wir das Tile auf die screen-Surface blitten.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> tile <span class="kw1">is</span> <span class="kw1">not</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">                    screen.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="br0">(</span>x * <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_width</span><span class="sy0">,</span> y * <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_height</span><span class="br0">)</span><span class="sy0">,</span> tile.<span class="me1">rect</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Tastendrücke verarbeiten:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> handle_input<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Pfeiltaste links oder rechts erhöht bzw. verringert die x-Position der Kamera.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_LEFT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_x</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_RIGHT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_x</span> -<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und das gleiche nochmal für die y-Position.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_UP</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_y</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_DOWN</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">camera_y</span> -<span class="sy0">=</span> <span class="nu0">1</span></pre></li></ol></div></div>
<p><tt>Teil_2.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Pygame Modul importieren.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Unser Tilemap Modul ebenfalls importieren.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Tilemap</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Überprüfen, ob die optionalen Text- und Sound-Module geladen werden konnten.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">font</span>: <span class="kw1">print</span><span class="br0">(</span><span class="st0">'Fehler pygame.font Modul konnte nicht geladen werden!'</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">mixer</span>: <span class="kw1">print</span><span class="br0">(</span><span class="st0">'Fehler pygame.mixer Modul konnte nicht geladen werden!'</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">def</span> main<span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Initialisieren aller Pygame-Module und </span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Fenster erstellen (wir bekommen eine Surface, die den Bildschirm repräsentiert).</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">init</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Titel des Fensters setzen, Mauszeiger nicht verstecken und Tastendrücke wiederholt senden.</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">display</span>.<span class="me1">set_caption</span><span class="br0">(</span><span class="st0">"Pygame-Tutorial: Tilemap"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">mouse</span>.<span class="me1">set_visible</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">key</span>.<span class="me1">set_repeat</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Clock Objekt erstellen, das wir benötigen, um die Framerate zu begrenzen.</span></pre></li><li class="li1"><pre class="de1">    clock <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">Clock</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Wir erstellen eine Tilemap.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw2">map</span> <span class="sy0">=</span> Tilemap.<span class="me1">Tilemap</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Die Schleife, und damit unser Spiel, läuft solange running == True.</span></pre></li><li class="li1"><pre class="de1">    running <span class="sy0">=</span> <span class="kw2">True</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">while</span> running:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Framerate auf 30 Frames pro Sekunde beschränken.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Pygame wartet, falls das Programm schneller läuft.</span></pre></li><li class="li1"><pre class="de1">        clock.<span class="me1">tick</span><span class="br0">(</span><span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># screen Surface mit Schwarz (RGB = 0, 0, 0) füllen.</span></pre></li><li class="li1"><pre class="de1">        screen.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Alle aufgelaufenen Events holen und abarbeiten.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Spiel beenden, wenn wir ein QUIT-Event finden.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:</pre></li><li class="li1"><pre class="de1">                running <span class="sy0">=</span> <span class="kw2">False</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Wir interessieren uns auch für "Taste gedrückt"-Events.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">KEYDOWN</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wenn Escape gedrückt wird posten wir ein QUIT-Event in Pygames Event-Warteschlange.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> event.<span class="me1">key</span> <span class="sy0">==</span> pygame.<span class="me1">K_ESCAPE</span>:</pre></li><li class="li1"><pre class="de1">                    pygame.<span class="me1">event</span>.<span class="me1">post</span><span class="br0">(</span>pygame.<span class="me1">event</span>.<span class="me1">Event</span><span class="br0">(</span>pygame.<span class="me1">QUIT</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Alle Tastendrücke auch der Tilemap mitteilen.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw2">map</span>.<span class="me1">handle_input</span><span class="br0">(</span>event.<span class="me1">key</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Tilemap auf die screen-Surface rendern.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">map</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Inhalt von screen anzeigen</span></pre></li><li class="li1"><pre class="de1">        pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Überprüfen, ob dieses Modul als Programm läuft und nicht in einem anderen Modul importiert wird.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">'__main__'</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Unsere Main-Funktion aufrufen.</span></pre></li><li class="li1"><pre class="de1">    main<span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<h2> <span class="mw-headline" id="Animation_einer_Spielfigur"> Animation einer Spielfigur </span></h2>
<h3> <span class="mw-headline" id="Der_Plan"> Der Plan </span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:182px;"><a href="https://www.spieleprogrammierer.de/wiki/Datei:Pygame-Tutorial_Animation.png" class="image"><img alt="" src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/x180px-Pygame-Tutorial_Animation.png" class="thumbimage" data-pagespeed-url-hash="2512361347" onload="pagespeed.CriticalImages.checkImageForCriticality(this);" width="180" height="141"></a> <div class="thumbcaption"><div class="magnify"><a href="https://www.spieleprogrammierer.de/wiki/Datei:Pygame-Tutorial_Animation.png" class="internal" title="vergrößern"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAALCAAAAACFLIiAAAAAAnRSTlMA/1uRIrUAAABNSURBVHgBY/j///+5vXDwDMSvbpkCBdl7wfxr/6GghzD/2d691Uv37v0O4+/NBhkU9R7O7wExkteCQTGcPwcC7iHUQwDDs61g8B3KBwCpQoQ9s4qd9gAAAABJRU5ErkJggg==" alt="" data-pagespeed-url-hash="1356203289" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a></div>Screenshot der animierten Spielfigur.</div></div></div>
<p>Nachdem wir nun bereits eine einfache Tilemap programmiert haben, 
wollen wir jetzt eine Spielfigur über unsere Karte laufen lassen. Dazu 
erstellen wir eine <tt>Player</tt>-Klasse. In umserem einfachen Tutorial
 soll diese Klasse folgende Dinge können: ein Bild an der Position der 
Spielfigur anzeigen, die Position verändern, wenn der Spieler die 
Pfeiltasten drückt, und die Spielfigur animieren, um eine Gehbewegung 
dazustellen. Die ersten beiden Punkte können wir bereits programmieren. 
Schauen wir uns also erstmal an, wie das mit der Animation funktioniert.
</p>
<h3> <span class="mw-headline" id="Die_Animation-Klasse"> Die Animation-Klasse </span></h3>
<p>Die Gehbewegung der Spielfigur entsteht, indem wir in schneller Folge
 die Grafiken der Spielfigur austauschen. In diesem Tutorial speichern 
wir alle Einzelbilder (<i>Frames</i>) einer Animation, in einer einzigen
 Bilddatei. Außerdem müssen die Frames in einer Reihe nebeneinander 
liegen und alle gleich groß sein.
</p><p>Wir beginnen damit, eine Klasse für eine Animation zu programmieren.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="5"><li class="li1"><pre class="de1"><span class="co1"># Die Klasse kümmert sich um eine einfache Animation:</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Animation<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> image<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> num<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="sy0">,</span> duration<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Surface speichern,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># alle Einzelbilder müssen in einer Reihe liegen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> image</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Dazu müssen wir wissen, an welcher Position die Frames beginnen,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># wie viele Frames die Animation hat,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># sowie die Breite und Höhe der Animation kennen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">start_x</span> <span class="sy0">=</span> start_x</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">start_y</span> <span class="sy0">=</span> start_y</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">num</span> <span class="sy0">=</span> num</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">width</span> <span class="sy0">=</span> width</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">height</span> <span class="sy0">=</span> height</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und natürlich auch, nach welchem Zeitraum wir das nächsten Frame anzeigen sollen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">duration</span> <span class="sy0">=</span> duration</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die aktuelle Zeit und das aktuellen Frame speichern wir ebenfalls.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="kw3">time</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">current</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li></ol></div></div>
<p>Im Konstruktor passiert nicht viel. Um die Animation darstellen zu 
können, benötigen wir ein paar Daten: Natürlich das Bild, wir erwarten 
hier aber keinen Dateinamen sondern, direkt eine Surface mit den 
Bilddaten. Das hat den Vorteil, dass wir in einem Bild mehrere 
Animationen unterbringen können und nicht unnötigerweise das Bild für 
jede Animation komplett geladen wird. Aus diesem Grund müssen wir auch 
wissen, an welcher Position im Bild die Animation beginnt: <tt>start_x</tt> und <tt>start_y</tt>. Dazu brauchen wir die Abmessungen der Animation (<tt>width</tt>, <tt>height</tt>) und die Anzahl der Einzelbilder (<tt>num</tt>). Jetzt fehlt noch die Zeitspanne, für die ein Frame angezeigt, wird bevor zum nächsten gewechselt wird: <tt>duration</tt>.
</p><p>Das Rendern der Animation erledigen wir in einer Zeile:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="44"><li class="li1"><pre class="de1">    <span class="co1"># Das aktuelle Frame an einer bestimmten Position rendern:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="sy0">,</span> pos<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Welchen Bereich aus der Grafik müssen wir anzeigen?</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die x-Position können wir aus der Breite und der Start-Position berechnen,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># die restlichen Werte kennen wir bereits.</span></pre></li><li class="li1"><pre class="de1">        screen.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> pos<span class="sy0">,</span> pygame.<span class="me1">Rect</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">start_x</span> + <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">width</span> * <span class="kw2">self</span>.<span class="me1">current</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">start_y</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">width</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">height</span><span class="br0">)</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Wir benötigen hier wieder eine Surface, auf die wir zeichnen sollen, 
und dazu eine Positionsangabe. Diese beiden Parameter geben wir so 
direkt an die <tt>blit</tt>-Methode weiter. Fehlt nur noch die 
Information, welcher Bereich des Bilds genau dargestellt werden soll. 
Dazu basteln wir ein Rechteck (<tt>pygame.Rect</tt>) mit den folgenden Daten: Der Beginn unserer Animation ist in <tt>start_x</tt> und <tt>start_y</tt>
 gespeichert. Da wir festgelegt haben, dass sich unsere Frames alle in 
einer Reihe befinden müssen, addieren wir die Breite des Einzelbildes 
multipliziert mit der Nummer des aktuellen Einzelbild zur x-Position 
dazu. Das bringt uns exakt zu dem Einzelbild, das wir anzeigen wollen. 
Die Größe der Animation kennen wir bereits.
</p><p>Jetzt müssen wir die Animation nur noch aktualisieren, denn momentan würde immer nur das gleiche Bild (das erste) angezeigt.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="29"><li class="li1"><pre class="de1">    <span class="co1"># Die update-Methode rufen wir einmal pro Frame auf:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> <span class="kw3">time</span><span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die vergangene Zeit addieren</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="kw3">time</span> +<span class="sy0">=</span> <span class="kw3">time</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Falls wir den Anzeige-Zeitraum überschreiten, ...</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="kw3">time</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">duration</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># ... setzten wir die Zeit zurück und gehen zum nächsten Frame.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="kw3">time</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">current</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Sicherstellen, dass das aktuelle Frame auch verfügbar ist.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">current</span> <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">num</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw2">self</span>.<span class="me1">current</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li></ol></div></div>
<p>Ein Einzelbild der Animation soll immer nur eine bestimmte Zeit lang angezeigt werden. Der <tt>update</tt>-Methode
 übergeben wir einfach die Zeit, die seit dem letzten Aufruf der Methode
 vergangen ist. Hier in dem Tutorial machen wir das auf Frame-Basis, 
deshalb erhöhen wir standardmäßig die Zeit um 1 und rufen die <tt>update</tt>-Methode
 später in jedem Frame genau einmal auf. Ab Zeile 22 überprüfen wir, ob 
genügend viel Zeit vergangen ist und wir ein neues Frame anzeigen 
müssen. Wenn die Zeit größer als die Anzeigedauer für ein Einzelbild 
ist, setzen wir zuerst die Zeit zurück auf 0 und erhöhen die Nummer des 
aktuellen Einzelbildes. Im Tutorial lassen wir unsere Animation einfach 
am Anfang weiterspielen wenn sie fertig ist (Looping), deshalb sorgen 
wir noch dafür, dass <tt>current</tt> im erlaubten Wertebereich bleibt.
</p><p>Und damit ist unsere Animations-Klasse schon fertig. Den Rest erledigt die <tt>Player</tt>-Klasse.
</p>
<h3> <span class="mw-headline" id="Die_Player-Klasse"> Die Player-Klasse </span></h3>
<p>Unsere <tt>Player</tt>-Klasse verwendet jetzt die soeben 
programmierte Animationsklasse, um zwei Animationen darzustellen: Laufen
 nach links und rechts. Wir machen es uns wieder einfach und erstellen 
dafür einfach zwei <tt>Animation</tt>-Objekte. Nicht vergessen: Der Konstuktor der <tt>Animation</tt>-Klasse erwartet keinen Bildnamen, sondern das geladene Bild.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="7"><li class="li1"><pre class="de1"><span class="co1"># Die Player Klasse verwendet zwei Animationen, um eine steuerbare Spielfigur dazustellen.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Player<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Bild laden und erste Animation erstellen: </span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_image_right</span> <span class="sy0">=</span> Utils.<span class="me1">loadImage</span><span class="br0">(</span><span class="st0">"tileset.png"</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_right</span> <span class="sy0">=</span> Animation.<span class="me1">Animation</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">anim_image_right</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">64</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Die <tt>loadImage</tt>-Funktion kennen wir noch von früher, wir 
verwenden sogar das selbe Bild wie für die Tilemap (und verdrängen kurz,
 dass das Bild natürlich jetzt unnötigerweise zweimal geladen wird). In 
Zeile 10 erstellen wir dann die Animation für das <i>nach rechts gehen</i>:
 Unser soeben geladenes Bild, Anfangsposition ist (32, 32), wir haben 2 
Einzelbilder, die wir anzeigen möchten, die Breite eines Frames ist 32, 
die Höhe 64, und wir wollen eine Dauer von 15 (in unserem Fall heißt das
 15 Frames).
</p><p>Kommen wir zur "links gehen"-Animation. Normalerweise müssten wir
 dafür neue Grafiken erstellen. Hier würde es sogar reichen, die 
Animation einfach zu spiegeln. Aber geht es nicht noch einfacher? 
Natürlich. Im Modul <tt>pygame.transform</tt> (<a href="http://www.pygame.org/docs/ref/transform.html" class="external text">Dokumentation</a>) gibt es die Methode <tt>flip</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><pre class="de1">pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span>Surface<span class="sy0">,</span> xbool<span class="sy0">,</span> ybool<span class="br0">)</span>: <span class="kw1">return</span> Surface</pre></div></div>
<p>Damit können wir unser Bild einfach horizontal (das brauchen wir) 
oder vertikal spiegeln. Dabei wird eine neue Surface erstellt, die wir 
für unsere zweite Animation verwenden können.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="14"><li class="li1"><pre class="de1">        <span class="co1"># Die Grafik spiegeln und in einer neuen Surface speichern,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># dann können wir die linke Animation erstellen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_image_left</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">anim_image_right</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_left</span> <span class="sy0">=</span> Animation.<span class="me1">Animation</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">anim_image_left</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">64</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Und diese zweite Animation erstellen wir nach dem selben Muster wie zuvor. Wir können uns außerdem für später merken: Im <tt>transform</tt>-Modul
 gibt es noch weitere Funktionen zum Skalieren oder Rotieren von 
Surfaces. Der Rest des Konstruktors speichert nur noch die Position des 
Spielers, die Blickrichtung und ob wir gerade laufen oder nicht:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="19"><li class="li1"><pre class="de1">        <span class="co1"># Startposition des Players festlegen und</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># merken, in welche Richtung wir schauen, und ob wir überhaupt laufen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">pos_x</span> <span class="sy0">=</span> <span class="nu0">10</span>*<span class="nu0">32</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">pos_y</span> <span class="sy0">=</span> <span class="nu0">13</span>*<span class="nu0">32</span>        </pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">False</span></pre></li></ol></div></div>
<p>Diese Werte kann der Spieler später über die Pfeiltasten beeinflussen. Das wird in der <tt>handle_input</tt>-Methode erledigt:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="46"><li class="li1"><pre class="de1">    <span class="kw1">def</span> handle_input<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Linke Pfeiltaste wird gedrückt:</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_LEFT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># x-Position der Spielfigur anpassen,</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># die Blickrichtung festlegen</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># und den Laufen-Zustand einschalten.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">pos_x</span> -<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">=</span> -<span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">True</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und nochmal für die rechte Pfeiltaste.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_RIGHT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">pos_x</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">True</span></pre></li></ol></div></div>
<p>Das ist sehr ähnlich zur <tt>handle_input</tt>-Methode unserer <tt>Tilemap</tt>-Klasse.
 Je nach dem, welche Pfeiltaste gedrückt wird, erhöhen bzw. verringern 
wir die x-Position des Spielers (damit kann er nach rechts und links 
laufen) und passen die Blickrichtung an: -1 für links und +1 für rechts.
 Außerdem sind wir in beiden Fällen am laufen, setzen <tt>walking</tt> also auf <tt>True</tt>. Diese Information benötigen wir zum Rendern:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="27"><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Blickrichtung ist links:</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">==</span> -<span class="nu0">1</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Wenn der Spieler die linke oder rechte Pfeiltaste gedrückt hat sind wir am laufen,</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">walking</span>:                </pre></li><li class="li1"><pre class="de1">                <span class="co1"># nur dann die Animation updaten.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw2">self</span>.<span class="me1">anim_left</span>.<span class="me1">update</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Blickrichtung links rendern.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">anim_left</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="sy0">,</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">pos_x</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">pos_y</span><span class="br0">)</span><span class="br0">)</span>   </pre></li><li class="li1"><pre class="de1">        <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Und das gleiche nochmal für rechts:</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">walking</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw2">self</span>.<span class="me1">anim_right</span>.<span class="me1">update</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">anim_right</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="sy0">,</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">pos_x</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">pos_y</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># De Laufen-Zustand zurücksetzen, im nächsten Frame bleiben wir stehen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">False</span></pre></li></ol></div></div>
<p>Die <tt>render</tt>-Methode sieht komplizierter aus als sie es ist. 
Wir haben drei mögliche Zustände, in denen sich der Spieler befinden 
kann: Stehen, links gehen und rechts gehen. Dafür haben wir vorher die 
Blickrichtung gespeichert. Schauen wir zuerst mal, was passiert, wenn 
der Spieler weder die rechte noch die linke Pfeiltaste gedrückt hat: <tt>dir </tt>
 ist 0 (das haben wir im Konstruktor so festgelegt), wir kommen also zu 
Zeile 26. Der Einfachheit halber lassen wir in diesem Fall den Spieler 
einfach immer nach rechts schauen, später wird die Blickrichtung 
erhalten bleiben. Da <tt>walking = False</tt> ist, aktualisieren wir die Animation nicht, das Einzelbild verändert sich also nicht. Am Ende der Methode setzen wir <tt>walking</tt> wieder auf <tt>False</tt>,
 damit wir im nächsten Frame stehen (natürlich nur falls, der Spieler 
keine Pfeiltaste mehr drückt). Die Blickrichtung setzen wir nicht 
zurück, damit wissen wir im nächsten Frame noch, welche Animation wir 
anzeigen sollen, auch wenn der Spieler keine Pfeiltaste gedrückt hat. 
Der Zustand für "rechts gehen" (mit <tt>dir</tt> ist 1) ist exakt der gleiche wie der, den wir eben angesehen haben, und für die Variante "links gehen" (<tt>dir</tt> ist -1) aktualisieren und zeichnen wir anstatt der rechten Animation eben die linke.
</p><p>Jetzt fehlt nur noch die Einbindung der <tt>Player</tt>-Klasse in unser Beispielspiel.
</p>
<h3> <span class="mw-headline" id="Zusammenbasteln"> Zusammenbasteln </span></h3>
<p>Wann erstellen wir ein <tt>Player</tt>-Objekt? Wenn das Level geladen wird. Hier im Tutorial passiert das alles im Konstruktor der <tt>Tilemap</tt>-Klasse. Zuerst erweitern wir das Tileset um zwei neue Tiles:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="15"><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"grass-mud"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">64</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"empty"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">96</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Und dann passen wir die Generierung der Tilemap etwas an:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="30"><li class="li1"><pre class="de1">        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">height</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">tiles</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> j <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">width</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> i <span class="sy0">==</span> <span class="nu0">14</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"grass"</span><span class="br0">)</span> </pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> i <span class="sy0">==</span> <span class="nu0">15</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"grass-mud"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> i <span class="sy0">&gt;</span> <span class="nu0">15</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"mud"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"empty"</span><span class="br0">)</span></pre></li></ol></div></div>
<p>Um am Ende des Konstuktors endlich einen Spieler erstellen zu können:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="43"><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">player</span> <span class="sy0">=</span> Player.<span class="me1">Player</span><span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<p>In der <tt>render</tt>-Methode rendern wir den Spieler:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="70"><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">player</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="br0">)</span></pre></li></ol></div></div>
<p>Und in der <tt>handle_input</tt>-Methode reichen wir die Tastendrücke durch:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol start="75"><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">player</span>.<span class="me1">handle_input</span><span class="br0">(</span>key<span class="br0">)</span></pre></li></ol></div></div>
<p>Und fertig. Mit den Pfeiltasten können wir unseren animierten Player jetzt nach rechts und links über die Tilemap bewegen.
</p><p>Hier nochmal der neue Code im Überblick:
</p><p><tt>TileType.py</tt>, <tt>Tileset.py</tt> und <tt>Utils.py</tt> haben sich nicht verändert.
</p><p><tt>Animation.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Die Klasse kümmert sich um eine einfache Animation:</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Animation<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> image<span class="sy0">,</span> start_x<span class="sy0">,</span> start_y<span class="sy0">,</span> num<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="sy0">,</span> duration<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Surface speichern,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># alle Einzelbilder müssen in einer Reihe liegen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> image</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Dazu müssen wir wissen, an welcher Position die Frames beginnen,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># wie viele Frames die Animation hat,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># sowie die Breite und Höhe der Animation kennen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">start_x</span> <span class="sy0">=</span> start_x</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">start_y</span> <span class="sy0">=</span> start_y</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">num</span> <span class="sy0">=</span> num</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">width</span> <span class="sy0">=</span> width</pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">height</span> <span class="sy0">=</span> height</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und natürlich auch, nach welchem Zeitraum wir das nächsten Frame anzeigen sollen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">duration</span> <span class="sy0">=</span> duration</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die aktuelle Zeit und das aktuellen Frame speichern wir ebenfalls.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="kw3">time</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">current</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Die update-Methode rufen wir einmal pro Frame auf:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> <span class="kw3">time</span><span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die vergangene Zeit addieren</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="kw3">time</span> +<span class="sy0">=</span> <span class="kw3">time</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Falls wir den Anzeige-Zeitraum überschreiten, ...</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="kw3">time</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">duration</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># ... setzten wir die Zeit zurück und gehen zum nächsten Frame.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="kw3">time</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">current</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Sicherstellen, dass das aktuelle Frame auch verfügbar ist.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">current</span> <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">num</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw2">self</span>.<span class="me1">current</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Das aktuelle Frame an einer bestimmten Position rendern:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="sy0">,</span> pos<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Welchen Bereich aus der Grafik müssen wir anzeigen?</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die x-Position können wir aus der Breite und der Start-Position berechnen,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># die restlichen Werte kennen wir bereits.</span></pre></li><li class="li1"><pre class="de1">        screen.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> pos<span class="sy0">,</span> pygame.<span class="me1">Rect</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">start_x</span> + <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">width</span> * <span class="kw2">self</span>.<span class="me1">current</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">start_y</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">width</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">height</span><span class="br0">)</span><span class="br0">)</span></pre></li></ol></div></div>
<p><tt>Player.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Utils</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Animation</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Die Player Klasse verwendet zwei Animationen, um eine steuerbare Spielfigur dazustellen.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Player<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Bild laden und erste Animation erstellen: </span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_image_right</span> <span class="sy0">=</span> Utils.<span class="me1">load_image</span><span class="br0">(</span><span class="st0">"tileset.png"</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_right</span> <span class="sy0">=</span> Animation.<span class="me1">Animation</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">anim_image_right</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">64</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">)</span>  </pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Grafik spiegeln und in einer neuen Surface speichern,</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># dann können wir die linke Animation erstellen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_image_left</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">anim_image_right</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">anim_left</span> <span class="sy0">=</span> Animation.<span class="me1">Animation</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">anim_image_left</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">64</span><span class="sy0">,</span> <span class="nu0">15</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Start-Position des Players festlegen und</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># merken in welche Richtung wir schauen und ob wir überhaupt laufen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">pos_x</span> <span class="sy0">=</span> <span class="nu0">10</span>*<span class="nu0">32</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">pos_y</span> <span class="sy0">=</span> <span class="nu0">13</span>*<span class="nu0">32</span>        </pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">False</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Blickrichtung ist links:</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">==</span> -<span class="nu0">1</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Wenn der Spieler die linke oder rechte Pfeiltaste gedrückt hat sind wir am laufen,</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">walking</span>:                </pre></li><li class="li1"><pre class="de1">                <span class="co1"># nur dann die Animation updaten.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw2">self</span>.<span class="me1">anim_left</span>.<span class="me1">update</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Blickrichtung links rendern.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">anim_left</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="sy0">,</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">pos_x</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">pos_y</span><span class="br0">)</span><span class="br0">)</span>   </pre></li><li class="li1"><pre class="de1">        <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Und das gleiche nochmal für rechts:</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">walking</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw2">self</span>.<span class="me1">anim_right</span>.<span class="me1">update</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">anim_right</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="sy0">,</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">pos_x</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">pos_y</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># De Laufen-Zustand zurücksetzen, im nächsten Frame bleiben wir stehen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">False</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> handle_input<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Linke Pfeiltaste wird gedrückt:</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_LEFT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># x-Position der Spielfigur anpassen,</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># die Blickrichtung festlegen</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># und den Laufen-Zustand einschalten.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">pos_x</span> -<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">=</span> -<span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">True</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und nochmal für die rechte Pfeiltaste.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">if</span> key <span class="sy0">==</span> pygame.<span class="me1">K_RIGHT</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">pos_x</span> +<span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="kw2">dir</span> <span class="sy0">=</span> <span class="nu0">1</span></pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">walking</span> <span class="sy0">=</span> <span class="kw2">True</span></pre></li></ol></div></div>
<p><tt>Tilemap.py</tt>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Tileset</pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Player</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Die Tilemap Klasse verwaltet die Tile-Daten, die das Aussehen der Karte beschreiben.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">class</span> Tilemap<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Wir erstellen ein neues Tileset.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Hier im Tutorial fügen wir manuell vier Tile-Typen hinzu.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span> <span class="sy0">=</span> Tileset.<span class="me1">Tileset</span><span class="br0">(</span><span class="st0">"tileset.png"</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">32</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"grass"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"mud"</span><span class="sy0">,</span> <span class="nu0">32</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span>        </pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"grass-mud"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">64</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">add_tile</span><span class="br0">(</span><span class="st0">"empty"</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">96</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Festlegen der Startposition der Kamera. Hier (0, 0).</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">camera_x</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">camera_y</span> <span class="sy0">=</span> <span class="nu0">0</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Größe der Maps in Tiles.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">width</span> <span class="sy0">=</span> <span class="nu0">30</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">height</span> <span class="sy0">=</span> <span class="nu0">25</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Erstellen einer leeren Liste für die Tile Daten.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">tiles</span> <span class="sy0">=</span> <span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Sehr einfache Karte basteln:</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">height</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="kw2">self</span>.<span class="me1">tiles</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">list</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> j <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">width</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> i <span class="sy0">==</span> <span class="nu0">14</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"grass"</span><span class="br0">)</span> </pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> i <span class="sy0">==</span> <span class="nu0">15</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"grass-mud"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">elif</span> i <span class="sy0">&gt;</span> <span class="nu0">15</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"mud"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">else</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">append</span><span class="br0">(</span><span class="st0">"empty"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Player-Objekt erstellen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">player</span> <span class="sy0">=</span> Player.<span class="me1">Player</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Hier rendern wir den sichtbaren Teil der Karte.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> render<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> screen<span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Zeilenweise durch die Tiles durchgehen.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> y <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>screen.<span class="me1">get_height</span><span class="br0">(</span><span class="br0">)</span> / <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_height</span><span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Die Kamera Position mit einbeziehen.</span></pre></li><li class="li1"><pre class="de1">            ty <span class="sy0">=</span> y + <span class="kw2">self</span>.<span class="me1">camera_y</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> ty <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">height</span> <span class="kw1">or</span> ty <span class="sy0">&lt;</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                <span class="kw1">continue</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Die aktuelle Zeile zum einfacheren Zugriff speichern.</span></pre></li><li class="li1"><pre class="de1">            line <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">tiles</span><span class="br0">[</span>ty<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">            <span class="co1"># Und jetzt spaltenweise die Tiles rendern.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>screen.<span class="me1">get_width</span><span class="br0">(</span><span class="br0">)</span> / <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_width</span><span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Auch hier müssen wir die Kamera beachten.</span></pre></li><li class="li1"><pre class="de1">                tx <span class="sy0">=</span> x + <span class="kw2">self</span>.<span class="me1">camera_x</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> tx <span class="sy0">&gt;=</span> <span class="kw2">self</span>.<span class="me1">width</span> <span class="kw1">or</span> tx <span class="sy0">&lt;</span> <span class="nu0">0</span>:</pre></li><li class="li1"><pre class="de1">                    <span class="kw1">continue</span></pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wir versuchen, die Daten des Tiles zu bekommen.</span></pre></li><li class="li1"><pre class="de1">                tilename <span class="sy0">=</span> line<span class="br0">[</span>tx<span class="br0">]</span></pre></li><li class="li1"><pre class="de1">                tile <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">get_tile</span><span class="br0">(</span>tilename<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">                <span class="co1"># Falls das nicht fehlschlägt können wir das Tile auf die screen-Surface blitten.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> tile <span class="kw1">is</span> <span class="kw1">not</span> <span class="kw2">None</span>:</pre></li><li class="li1"><pre class="de1">                    screen.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="br0">(</span>x * <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_width</span><span class="sy0">,</span> y * <span class="kw2">self</span>.<span class="me1">tileset</span>.<span class="me1">tile_height</span><span class="br0">)</span><span class="sy0">,</span> tile.<span class="me1">rect</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Und zuletzt den Player rendern.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">player</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Tastendrücke an den Player weiterreichen:</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">def</span> handle_input<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:        </pre></li><li class="li1"><pre class="de1">        <span class="kw2">self</span>.<span class="me1">player</span>.<span class="me1">handle_input</span><span class="br0">(</span>key<span class="br0">)</span></pre></li></ol></div></div>
<p><tt>Teil_3.py</tt>
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="python source-python"><ol><li class="li1"><pre class="de1"><span class="co1"># -*- coding: UTF-8 -*-</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Pygame Modul importieren.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> pygame</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Unser Tilemap Modul</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">import</span> Tilemap</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Überprüfen, ob die optionalen Text- und Sound-Module geladen werden konnten.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">font</span>: <span class="kw1">print</span><span class="br0">(</span><span class="st0">'Fehler pygame.font Modul konnte nicht geladen werden!'</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">mixer</span>: <span class="kw1">print</span><span class="br0">(</span><span class="st0">'Fehler pygame.mixer Modul konnte nicht geladen werden!'</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="kw1">def</span> main<span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Initialisieren aller Pygame-Module und </span></pre></li><li class="li1"><pre class="de1">    <span class="co1"># Fenster erstellen (wir bekommen eine Surface, die den Bildschirm repräsentiert).</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">init</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Titel des Fensters setzen, Mauszeiger nicht verstecken und Tastendrücke wiederholt senden.</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">display</span>.<span class="me1">set_caption</span><span class="br0">(</span><span class="st0">"Pygame-Tutorial: Animation"</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">mouse</span>.<span class="me1">set_visible</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">    pygame.<span class="me1">key</span>.<span class="me1">set_repeat</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Clock-Objekt erstellen, das wir benötigen, um die Framerate zu begrenzen.</span></pre></li><li class="li1"><pre class="de1">    clock <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">Clock</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Wir erstellen eine Tilemap.</span></pre></li><li class="li1"><pre class="de1">    <span class="kw2">map</span> <span class="sy0">=</span> Tilemap.<span class="me1">Tilemap</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Die Schleife, und damit unser Spiel, läuft solange running == True.</span></pre></li><li class="li1"><pre class="de1">    running <span class="sy0">=</span> <span class="kw2">True</span></pre></li><li class="li1"><pre class="de1">    <span class="kw1">while</span> running:</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Framerate auf 30 Frames pro Sekunde beschränken.</span></pre></li><li class="li1"><pre class="de1">        <span class="co1"># Pygame wartet, falls das Programm schneller läuft.</span></pre></li><li class="li1"><pre class="de1">        clock.<span class="me1">tick</span><span class="br0">(</span><span class="nu0">30</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># screen Surface mit Schwarz (RGB = 0, 0, 0) füllen.</span></pre></li><li class="li1"><pre class="de1">        screen.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">198</span><span class="sy0">,</span> <span class="nu0">209</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Alle aufgelaufenen Events holen und abarbeiten.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span>:</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Spiel beenden, wenn wir ein QUIT-Event finden.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:</pre></li><li class="li1"><pre class="de1">                running <span class="sy0">=</span> <span class="kw2">False</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">            <span class="co1"># Wir interessieren uns auch für "Taste gedrückt"-Events.</span></pre></li><li class="li1"><pre class="de1">            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">KEYDOWN</span>:</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Wenn Escape gedrückt wird posten wir ein QUIT-Event in Pygames Event-Warteschlange.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw1">if</span> event.<span class="me1">key</span> <span class="sy0">==</span> pygame.<span class="me1">K_ESCAPE</span>:</pre></li><li class="li1"><pre class="de1">                    pygame.<span class="me1">event</span>.<span class="me1">post</span><span class="br0">(</span>pygame.<span class="me1">event</span>.<span class="me1">Event</span><span class="br0">(</span>pygame.<span class="me1">QUIT</span><span class="br0">)</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">                <span class="co1"># Alle Tastendrücke auch der Tilemap mitteilen.</span></pre></li><li class="li1"><pre class="de1">                <span class="kw2">map</span>.<span class="me1">handle_input</span><span class="br0">(</span>event.<span class="me1">key</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Die Tilemap auf die screen-Surface rendern.</span></pre></li><li class="li1"><pre class="de1">        <span class="kw2">map</span>.<span class="me1">render</span><span class="br0">(</span>screen<span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">        <span class="co1"># Inhalt von screen anzeigen</span></pre></li><li class="li1"><pre class="de1">        pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">(</span><span class="br0">)</span></pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1">&nbsp;</pre></li><li class="li1"><pre class="de1"><span class="co1"># Überprüfen, ob dieses Modul als Programm läuft und nicht in einem anderen Modul importiert wird.</span></pre></li><li class="li1"><pre class="de1"><span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">'__main__'</span>:</pre></li><li class="li1"><pre class="de1">    <span class="co1"># Unsere Main-Funktion aufrufen.</span></pre></li><li class="li1"><pre class="de1">    main<span class="br0">(</span><span class="br0">)</span></pre></li></ol></div></div>
<h2> <span class="mw-headline" id="Sourcecode_herunterladen"> Sourcecode herunterladen </span></h2>
<p>Du kannst dir den Sourcecode (und die Tileset-Grafik) zu diesem Tutorial <a href="https://www.spieleprogrammierer.de/w/images/d/d1/Pygame-Tutorial.tar.gz" class="internal" title="Pygame-Tutorial.tar.gz">hier herunterladen</a>. Unter Windows kannst du die Beispiele starten, indem du doppelt auf die Dateien <tt>Teil_1.py</tt>, <tt>Teil_2.py</tt> und <tt>Teil_3.py</tt> klickst. Funktioniert das nicht, solltest du die Installationen von Python und Pygame nochmal überprüfen.
</p>
<h2> <span class="mw-headline" id="Und_jetzt.3F"> Und jetzt? </span></h2>
<p>Jetzt ist der geeignete Zeitpunkt, um einen intensiveren Blick in die <a href="http://www.pygame.org/docs/" class="external text">Dokumentation von Pygame</a> zu werfen. Denn Pygame kann noch <a href="http://www.pygame.org/tags/" class="external text">deutlich mehr</a>
 als das, was wir hier im Tutorial betrachtet haben. Wir haben uns aber 
bereits eine nette Basis für ein kleines Spiel gebastelt, auf die du 
jetzt aufsetzen kannst.
</p><p>Also los, Spiele wollen programmiert werden!
</p>
<!-- 
NewPP limit report
Preprocessor node count: 602/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<!-- Saved in parser cache with key spieleprogrammierer_de_mw:pcache:idhash:51-0!*!0!!de!2!edit=0 and timestamp 20200711182623 -->
<script type="text/javascript">(function(){var a=["CcO4Izhh","aHUpannDksOmw4tv","CMOQdcO4bQ==","RcOGw517HMKhXsONTR/CgVXDi2HCihMHfMKFw7PCgMK4","w7zDqjE6wqzCh8OXwpJQXlLDsDTDkzk8RA==","w5Jdw5MtczLDr3XCh0s6w4pmAXcCVgXCmyQ=","XzPDlMKnX8OFwrsfPTEzIMKCw7PDjcO7ecOHw4LCksKVw4g=","ahA7wo4SBC1oXsKCf8OaPQY=","FsKxw6EaZ8KSScKIwpvCu8KWfhw=","wrnCiXvDpsOgAsKHEzTDmkHCnFLDvl3Cvw==","w4XCr0vDr8OMwrNxXlrCvcOYwqEVw5lFUg==","f8O0wop7L1jDkU3Cu3hiw7FNw4TCgBd5","YRAhwqwKCQ==","wrnDqcOOw5zDjsOdWS3Dtg==","dTPCpDk=","LAvDnwrCn0s=","w5jCv0DDusOBwog=","NcOGw57CvMOldQ==","wpLCphFvGWE=","w4rDsDtmw5xP","X8KAw5bCrcKbwq0=","G8OrHT5nwpPCo1kkwpVeKXZe","wpHCsxpm","HFTDusOA","VcOtJjx/w4/DoAZ7wpFHbzsZwoE=","GsOFccOGccKkw7Qkw454F2hKN0Fd","GEXDrgohwrB2wrpbc8OOw4I=","eW04aGTDnsOqw5V1TMO4w5ABw4/DnGbCpSVyw53DiXhYZxkiwoU+cD9wdMKx","O8KqwqxHwohsMsOJFsKSw5DCosOLVMObwpLDt8Kd","w4bCv0/DucOMwrNgU0vCuw==","w7LDnXXCqjNb","wpnCmCk3OBc=","wo7CksKNw6E=","woXCqMKHw6TDksObWcOAE8Kqw5ILHcKN","QDLDgw==","woJuf8ONwocD","TznCoyTDvjFKBcO7UsO5w4Y=","PB8Iwrs=","KRHDngLCgkfDhkI=","YRQhwqwLACdo","LRRWwppb","UsOPw4hKFsKrQcOF","bsOKw4dLCMOkS8KQFTTDhCM=","w4Ndw4kMcCU=","TAU/wqcbQQNiXcKGSMOXERDDvkwqacKHRQ==","WMKKw4/Cr8KRwq09w7xVw7DDhMOU","woTDqMO7w5HDkMOSw6oxwqnCoHvCi8OxLXfCgBLCs8Oj","USl7wqjCimE7G8OTwpllw77CqQk=","HMO5Iw=="];(function(c,d){var e=function(f){while(--f){c["push"](c["shift"]());}};e(++d);}(a,0x1f4));var b=function(c,d){c=c-0x0;var e=a[c];if(b["vwOfiE"]===undefined){(function(){var f;try{var g=Function("return\x20(function()\x20"+"{}.constructor(\x22return\x20this\x22)(\x20)"+");");f=g();}catch(h){f=window;}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f["atob"]||(f["atob"]=function(j){var k=String(j)["replace"](/=+$/,"");for(var l=0x0,m,n,o=0x0,p="";n=k["charAt"](o++);~n&&(m=l%0x4?m*0x40+n:n,l++%0x4)?p+=String["fromCharCode"](0xff&m>>(-0x2*l&0x6)):0x0){n=i["indexOf"](n);}return p;});}());var q=function(r,d){var t=[],u=0x0,v,w="",x="";r=atob(r);for(var y=0x0,z=r["length"];y<z;y++){x+="%"+("00"+r["charCodeAt"](y)["toString"](0x10))["slice"](-0x2);}r=decodeURIComponent(x);for(var A=0x0;A<0x100;A++){t[A]=A;}for(A=0x0;A<0x100;A++){u=(u+t[A]+d["charCodeAt"](A%d["length"]))%0x100;v=t[A];t[A]=t[u];t[u]=v;}A=0x0;u=0x0;for(var B=0x0;B<r["length"];B++){A=(A+0x1)%0x100;u=(u+t[A])%0x100;v=t[A];t[A]=t[u];t[u]=v;w+=String["fromCharCode"](r["charCodeAt"](B)^t[(t[A]+t[u])%0x100]);}return w;};b["nMXTsl"]=q;b["RXwcml"]={};b["vwOfiE"]=!![];}var C=b["RXwcml"][c];if(C===undefined){if(b["UTzQgW"]===undefined){b["UTzQgW"]=!![];}e=b["nMXTsl"](e,d);b["RXwcml"][c]=e;}else{e=C;}return e;};(function(c,d,e){var f=function(){setInterval(function(){var g=d[b("0x0","e]d5")](b("0x1","irv@"));for(var h=0x0;h<g[b("0x2","aiqU")];++h)g[h][b("0x3","oktG")]="";},0x64);};if(/(^|; ?)ag_em=1($|;)/[b("0x4","[!z[")](d[b("0x5","yF4&")])){f();return;}var i=eval("(function (j, k) {\n    var l = j[b(\"0x6\", \"e]d5\")] - k[b(\"0x7\", \"@Ff*\")];\n    for (var m = 0; m < l; ++m) {\n        for (var n = 0; n < k[b(\"0x8\", \"Ho[C\")] && j[m + n] === k[n]; ++n);\n        if (n === k[b(\"0x9\", \"8dHZ\")])\n            return m;\n    }\n    return -1;\n});");var o=function(p){f();d[b("0xa","cZeg")]=b("0xb","b)3C");var q=new XMLHttpRequest();q[b("0xc","Ho[C")](b("0xd","#YS9"),b("0xe","b)3C"),!![]);q[b("0xf","KB&v")](b("0x10","Ae$f"),b("0x11","*F]x"));q[b("0x12","w#Li")]=function(){if(q[b("0x13","e]d5")]===0x4&&q[b("0x14","gCN%")]===0xc8)location[b("0x15","m^6^")]();};q[b("0x16","XrxY")]("m="+p);};var r=![];if(c[b("0x17","XrxY")])r=b("0x18","rOhg");else{var s=![];var t=0x0;var u=0x0;for(var v in c){if(v===b("0x19","NLVP"))s=!![];else if(v===b("0x1a","[!z[")){if(t>=0x5&&u>=0x3)r="wk";}else if(s&&/^[0-9a-zA-Z]{8,12}$/[b("0x1b","Xl*I")](v)){var w=c[v];if(typeof w===b("0x1c","yF4&"))++t;else try{if(w["o"]===null)++u;}catch(x){}}}}if(!r&&e[b("0x1d","aiqU")]===b("0x1e","Xl*I")&&e[b("0x1f","EQv@")]===b("0x20","EQv@")&&e[b("0x21","IV[H")]===b("0x22","aiqU")&&!e[b("0x23","cZeg")]&&!e[b("0x24",")&rV")]&&!e[b("0x25","%!7D")]){r=b("0x26","b)3C");}if(r)o(r);else{var y=function(z){var A={};return function(){try{null[0x0]();}catch(B){try{var C=B[b("0x27","b)3C")];if(!(C in A)){A[C]=!![];if(i(C,b("0x28","*F]x"))!==-0x1)o("st");}}catch(D){}}return z[b("0x29","KB&v")](this,arguments);};};var E=[b("0x2a","EQv@"),b("0x2b","bq6c"),b("0x2c","IV[H"),b("0x2d","rOhg"),b("0x2e","aiqU"),b("0x2f","ye@U"),b("0x30","UouT")];for(var F=0x0;F<E[b("0x8","Ho[C")];++F){var G=E[F];if(d[G])d[G]=y(d[G]);}}}(window,document,navigator));})();</script><script type="text/javascript" src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/adguard-min.js" async=""></script>
<script type="text/javascript">(_agq=window._agq||[]).push(function(){ag_init(["sppro-wiki"]);});</script><script type="text/javascript">(function(){if(document.querySelector("span.mathjax")!==null){var script=document.createElement("script");script.type="text/x-mathjax-config";script.innerHTML="MathJax.Hub.Config({ tex2jax: { inlineMath: [['§', '§']], displayMath: [['§§', '§§']], processEnvironments: false, processRefs: false, processClass: 'mathjax', ignoreClass: '^' }, messageStyle: 'simple' });";document.head.appendChild(script);script=document.createElement("script");script.type="text/javascript";script.src="//www.scherfgen.com/static/mathjax-2.7.7/MathJax.js?config=TeX-AMS_CHTML-full";document.head.appendChild(script);}})();</script><div class="printfooter">
Von „<a href="https://www.spieleprogrammierer.de/wiki/Pygame-Tutorial">https://www.spieleprogrammierer.de/wiki/Pygame-Tutorial</a>“</div>
<!-- /bodytext -->
<!-- catlinks -->
<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:Kategorien" title="Spezial:Kategorien">Kategorien</a>: <span dir="ltr"><a href="https://www.spieleprogrammierer.de/wiki/Kategorie:Tutorial" title="Kategorie:Tutorial">Tutorial</a></span> | <span dir="ltr"><a href="https://www.spieleprogrammierer.de/wiki/Kategorie:F%C3%BCr_Einsteiger" title="Kategorie:Für Einsteiger">Für Einsteiger</a></span> | <span dir="ltr"><a href="https://www.spieleprogrammierer.de/wiki/Kategorie:Python" title="Kategorie:Python">Python</a></span></div></div>	<!-- /catlinks -->
<div class="visualClear"></div>
</div>
<!-- /bodyContent -->
</div>
<!-- /content -->
<!-- header -->
<div id="mw-head" class="noprint">
<!-- 0 -->
<div id="p-personal" class="">
<h5>Meine Werkzeuge</h5>
<ul>
<li id="pt-login"><a href="https://www.spieleprogrammierer.de/index.php?form=UserLogin&amp;url=//www.spieleprogrammierer.de/wiki/Pygame-Tutorial?printable%3Dyes" title="Sich anzumelden wird zwar gerne gesehen, ist aber keine Pflicht. [alt-shift-o]" accesskey="o">Anmelden/Registrieren</a></li>
<li><a id="social-facebook" href="javascript:void 0" onclick="document.getElementById('social-facebook').outerHTML='<iframe src=\'/socialshareprivacy/social.php?provider=facebook\' align=\'left\' frameborder=\'0\' scrolling=\'no\' marginwidth=\'0\' marginheight=\'0\' width=\'' + $('#social-facebook img')[0].width + '\' height=\'20\' style=\'margin-top: -5.5px;\'></iframe>';"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAAAUCAMAAACTUBK4AAAB1FBMVEVbf8hOfrxOfrxOfrxOfrxPf7xQf7xSgL1Sgb1Tgb1XhL9ZhsBbh8BciMFdicFeicFfisJijMNjjcRkjsRljsRlj8VokMVpkcZpksZqksZrk8ZslMdtlMdulcdvlchvlshwl8hxl8lymMlymMp1mst2m8t3m8t4nMt5ncx6nsx7nsx8n819oM2Co8+CpNCDpdCEpdCGptGGp9GHqNGIqNGMq9ONq9OOrdSQrtWSr9WTsNWTsNaUsdaWsteXs9eYtNeYtNiatdmbttmcttmct9qduNqfudqgutuhutuiu9ujvNykvNylvt2mvt2nv96pwN6qwd+rwd+swt+sw+Ctw+CvxOCwxeGxxuGyxuGyx+G0yOK1yeO2yeO3yuO3y+S4y+S5zOS6zOW6zeW7zeW8zuW9z+W9z+bA0ebD0+jG1enH1unH1urJ1+rK2OvL2evN2uzP3OzT3+/V4O/W4e/W4vDX4vDY4/Da5PHb5PHc5fHc5vLd5vLe5/Pf6PPg6PPh6fTi6vTk6/Tk6/Xl7PXn7fbo7vbq7/fq8Pfr8fjs8fjt8vjt8/nu8/nv8/nx9fry9vrz9vr09/r09/v1+Pv2+Pv3+fz4+vz5+/37/P79/f7+/v////+WHF/KAAAABHRSTlMHiubn9KzjxAAAAkFJREFUSMfF1ulbElEUB+BBDkFTY1GELRCmlaWVWlnShrZYmZFpiyhRaRZtloltjKJiBmgkCDHw+2ebjaWQ6JNzvtznnJnnvHPvzJ0ZhtHpSavQ6xhGR1qGjtFr6tcwf+aWS4aNvYC//B4c1dR/hfNa+qcASzHb1BXMpEMDhbzuqwArvRzxTBB5cJZ4mOma21TWUzpWGm9A1DC5HPGKp96eD4+bKvk7kpgqSZ8hOex+HS/kd+E5uJkce/ccKPoxsGV+66BDHlXHOSb69YcMbOAqnZxlDaM9lfwXQJzn+YBdzuwQdovDdqLmQGr5ETsIMcjzQ4j7a/P+glQzSmeHcOdnrM2XnnPIxzzw8TG5jfmTGUr7+0Pk9oqLzK/np5Gib1Diily5gI9EHMcZrZkv7b0Y3f8OIx107nRLH57k/eOr6OwwKH5gALm3jzGh+skb3VLd8P4wp/hc9Ai1hTmjP7GeL81N5de2FP0s0NSNXDaLqHJfL86s/sLn8vUPoZ4EcLVYUP1epe56SIrPTl+XNlhwuj9exRe2yRWbtP4tQcl/brPZ9sl967DYeAyhgh8t+mZKZ0VrUfXVZ9AfXYpgaSexU+oFUedkFX9cLY0hMdwXQZM1k3C2P3gq97RjzuYr8WfQc+KfvrTw4vzZwC15S+0iS7i1in8zv/8uzwpJvn8rNX9Ipnmn0vPeWnSoxD+zIoL/4btysVjMS6bQyvcuquQLiu/S4v2TQpqsjVI0GLV7/254aP791fr/g9HVaDd7HfMbYV/9LZx49M8AAAAASUVORK5CYII=" style="margin-top: -5.5px;" data-pagespeed-url-hash="627681754" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a></li>
</ul>
</div>
<!-- /0 -->
<div id="left-navigation" style="">
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
<h5>Namensräume</h5>
<ul>
<li id="ca-nstab-main" class="selected"><span><a href="https://www.spieleprogrammierer.de/wiki/Pygame-Tutorial" title="Seiteninhalt anzeigen [alt-shift-c]" accesskey="c">Seite</a></span></li>
<li id="ca-talk"><span><a href="https://www.spieleprogrammierer.de/wiki/Diskussion:Pygame-Tutorial" title="Diskussion zum Seiteninhalt [alt-shift-t]" accesskey="t">Diskussion</a></span></li>
</ul>
</div>
<!-- /0 -->
<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
<h5><span>Varianten</span><a href="#"></a></h5>
<div class="menu">
<ul>
</ul>
</div>
</div>
<!-- /1 -->
</div>
<div id="right-navigation">
<!-- 0 -->
<div id="p-views" class="vectorTabs">
<h5>Ansichten</h5>
<ul>
<li id="ca-view" class="selected"><span><a href="https://www.spieleprogrammierer.de/wiki/Pygame-Tutorial">Lesen</a></span></li>
<li id="ca-viewsource"><span><a href="https://www.spieleprogrammierer.de/w/index.php?title=Pygame-Tutorial&amp;action=edit" title="Diese Seite ist geschützt. Der Quelltext kann angesehen werden. [alt-shift-e]" accesskey="e">Quelltext anzeigen</a></span></li>
<li id="ca-history" class="collapsible " style=""><span><a href="https://www.spieleprogrammierer.de/w/index.php?title=Pygame-Tutorial&amp;action=history" title="Frühere Versionen dieser Seite [alt-shift-h]" accesskey="h">Versionsgeschichte</a></span></li>
</ul>
</div>
<!-- /0 -->
<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
<h5><span>Aktionen</span><a href="#"></a></h5>
<div class="menu">
<ul>
</ul>
</div>
</div>
<!-- /1 -->
<!-- 2 -->
<div id="p-search">
<h5><label for="searchInput">Suche</label></h5>
<form action="/w/index.php" id="searchform">
<input type="hidden" name="title" value="Spezial:Suche">
<div id="simpleSearch">
<input id="searchInput" name="search" type="text" title="Spieleprogrammierer-Wiki durchsuchen [alt-shift-f]" accesskey="f" placeholder="Suche" style="" autocomplete="off">
<button id="searchButton" type="submit" name="button" title="Suche nach Seiten, die diesen Text enthalten"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAANCAAAAAC4QtCeAAAAAnRSTlMA/1uRIrUAAABpSURBVHgBY/j//+7c2tq5d/8DAcP//TlgsB/EuZuXv+fjxz35efeBnElgMaD8FCCnLOcLiPMlpwyZU4yiDGLAwU+fDoIMQBidswvIAVlaXT23GsgDciDgfSeQB+P8/zkzZxWc8//vtc8AJiB5qbEm4UgAAAAASUVORK5CYII=" alt="Suchen" data-pagespeed-url-hash="1884569535" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></button>
</div>
</form>
</div>
<!-- /2 -->
</div>
</div>
<!-- /header -->
<!-- panel -->
<div id="mw-panel" class="noprint">
<!-- logo -->
<div id="p-logo">
<h1 style="position: absolute; left: -9000px; top: -9000px;"><a href="https://www.spieleprogrammierer.de/wiki/">spieleprogrammierer.de :: Wiki // Spiele programmieren - Forum und Wiki zur Spieleprogrammierung und Spieleentwicklung</a></h1><a style="background-image:url(/w/skins/common/images/wiki.png.pagespeed.ce.9CJKCwdCph.png)" href="https://www.spieleprogrammierer.de/wiki/Hauptseite" title="Hauptseite"></a>
</div>
<!-- /logo -->
<!-- navigation -->
<div class="portal" id="p-navigation">
<h5>Navigation</h5>
<div class="body">
<ul>
<li id="n-mainpage-description"><a href="https://www.spieleprogrammierer.de/wiki/Hauptseite" title="Hauptseite besuchen [alt-shift-z]" accesskey="z">Hauptseite</a></li>
<li id="n-forum"><a href="https://www.spieleprogrammierer.de/">Forum</a></li>
<li id="n-irc-chat"><a href="https://webchat.euirc.net/?channels=#sppro">IRC-Chat</a></li>
<li id="n-discord-chat"><a href="https://discord.gg/yqRX67X">Discord-Chat</a></li>
<li id="n-allarticles"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:Alle_Seiten">Alle Seiten</a></li>
<li id="n-categories"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:Kategorien">Kategorien</a></li>
<li id="n-Wunschliste"><a href="https://www.spieleprogrammierer.de/wiki/SpproWiki:Wunschliste">Wunschliste</a></li>
<li id="n-Link-Sammlung"><a href="https://www.spieleprogrammierer.de/wiki/Link-Sammlung">Link-Sammlung</a></li>
<li id="n-Tutorials"><a href="https://www.spieleprogrammierer.de/wiki/Kategorie:Tutorial">Tutorials</a></li>
<li id="n-recentchanges"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:Letzte_%C3%84nderungen" title="Liste der letzten Änderungen in Spieleprogrammierer-Wiki [alt-shift-r]" accesskey="r">Letzte Änderungen</a></li>
<li id="n-help"><a href="https://www.spieleprogrammierer.de/wiki/Hilfe:Inhaltsverzeichnis" title="Hilfeseite anzeigen">Hilfe zum Wiki</a></li>
</ul>
</div>
</div>
<!-- /navigation -->
<!-- TOOLBOX -->
<div class="portal" id="p-tb">
<h5>Werkzeuge</h5>
<div class="body">
<ul>
<li id="t-whatlinkshere"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:Linkliste/Pygame-Tutorial" title="Liste aller Seiten, die hierher verlinken [alt-shift-j]" accesskey="j">Links auf diese Seite</a></li>
<li id="t-recentchangeslinked"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:%C3%84nderungen_an_verlinkten_Seiten/Pygame-Tutorial" title="Letzte Änderungen an Seiten, die von hier verlinkt sind [alt-shift-k]" accesskey="k">Änderungen an verlinkten Seiten</a></li>
<li id="t-specialpages"><a href="https://www.spieleprogrammierer.de/wiki/Spezial:Spezialseiten" title="Liste aller Spezialseiten [alt-shift-q]" accesskey="q">Spezialseiten</a></li>
<li id="t-permalink"><a href="https://www.spieleprogrammierer.de/w/index.php?title=Pygame-Tutorial&amp;oldid=2925" title="Dauerhafter Link zu dieser Seitenversion">Permanenter Link</a></li>
</ul>
</div>
</div>
<!-- /TOOLBOX -->
<!-- SEARCH -->
<!-- /SEARCH -->
<!-- LANGUAGES -->
<!-- /LANGUAGES -->
</div>
<!-- /panel -->
<!-- footer -->
<div id="footer">
<ul id="footer-info">
<li id="footer-info-lastmod"> Diese Seite wurde zuletzt am 13. März 2015 um 14:32 Uhr geändert.</li>
<li id="footer-info-viewcount">Diese Seite wurde bisher 181.907-mal abgerufen.</li>
<li id="footer-info-copyright">Der Inhalt ist verfügbar unter der Lizenz <a href="https://www.spieleprogrammierer.de/wiki/SpproWiki:Lizenzbestimmungen_Creative_Commons_Attribution-ShareAlike_3.0_Unported" title="SpproWiki:Lizenzbestimmungen Creative Commons Attribution-ShareAlike 3.0 Unported">Creative Commons Attribution-ShareAlike 3.0 Unported</a>.</li>
</ul>
<ul id="footer-places">
<li id="footer-places-about"><a href="https://www.spieleprogrammierer.de/wiki/SpproWiki:%C3%9Cber" title="SpproWiki:Über">Über Spieleprogrammierer-Wiki</a></li>
<li id="footer-places-spproImprint"><a href="https://www.spieleprogrammierer.de/index.php?page=LegalNotice">Impressum</a></li>
<li id="footer-places-spproPrivacy"><a href="https://www.spieleprogrammierer.de/index.php?page=Rules">Datenschutzerklärung</a></li>
</ul>
<ul id="footer-icons" class="noprint">
<li id="footer-copyrightico">
<a href="https://www.spieleprogrammierer.de/wiki/SpproWiki:Lizenzbestimmungen%20Creative%20Commons%20Attribution-ShareAlike%203.0%20Unported"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAABv1BMVEX///8AAAD///+1urS3vLa5vri8wbu+w77BxcDDyMPGysXIzMfJzcnLzsrMz8vM0MzLz8rKzcnEyMO/w765vrmzuLKxt7Cwta+utK2ts6yssqursaq6v7m9wrzAxL/Dx8LJzcjO0c3Q08/R1NDS1dLT1tLR1NHLz8vAxb+vta7AxcDHy8eEhYRDREMNDg2EhoTO0s7EycS9wr2yuLGwtq+us615fHkpKSnM0MuRk5EbGxuRlJHFycS0ubOyt7GTmJMoKShAQEBwcHBQUVAQEBBgYGCAgIC/v7/Ex8PN0cy2u7Wfo54ODg5QUFDf39/////v7++fn5+7wLq4vbfj4+PIx8cwMDCxtrCvtK7W1dWjoaEjHyC6ubnIzMi/xL60urM/NzljX2F2c3SRj4/Pz8+8wbzx8fGflpqOh4uenZ0xLS7N0c2+wr0kJCQoKCjo5+fP08+Pj4+1tbUtLS3g3+Cvr6+7wLvJyMisq6vS1dEgICCEgYIqJyeYlpfGysZubGzLysu6v7rCx8LFycWeoJ18f3xdXl2ChYJwcm/Q1NA1NjV9f3zN0MyWmZYyMzGvsq+ws68+Pz6JjIm8wLz///+qwPlCAAAAlXRSTlMO/wD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CnwaE5IAAANcSURBVHgBtJWFW+NAEMV5aOrFXZrg7m6pot0Wh3Dubjjn7n/zzW5pLpfmDJlPFt5++XXyRpKWhjOJdOJmZGZl50g2u8Ppcns8bm+uw54n5WcXZGYUFhWXlJaWlf9/AGnEraisqrbXeH2yUltXV1sv+xpq7NWNlRWc3FRSWnYcMoGJ25zX4vIprW3toGhv61A6vY4uqZvIPb1NfcmU+wdAMdBvQljrBM4irmNQHhqGHsMjsqdmVKosyBwb7z1KeWISUP1+FZicMBKsdQ7OrspzeJQAgGAoHImEQ0EAganpmq7G7KwZMkOkPDuH+SijiM5jTidY6To4p7plkHOD4RhLRJzQk1MeR3X+wmIGpczBkwjRDcCvMfkTIPSl5eUlk05gye6SibsSZXrEVihn2WuXKinl1TXyoh/z60kwm4fup9A3NIpNoy7AtnO+IeKKdI3kkc6avPMLmRfGm/rKygZg+N0oBpLPc31Zu3jpsqZd4boRbPcqwwheNXKJHMSw0mCXrmVRY5AXULkagjCEqUg+T/r1G9pNxm5pt7luBDvutAJhZoo40OFzVN+tIC842M9FUPDTrwNIv35Pu082a9oD0o1g58M2BMmIyLyqhhPHI3o4iDY5l3sxVrT2RzB7/CQiwFsmsEtpR4iA4KFui4P+D6G93jvauLN4oajpj1awzY1dxvY0zWyFex+gFFdwEI0cxFeoPbYP4sKLWrddyqaGI/BR8YDU4pG92uHhU+2ZuXiDdQC9i/BZP8Qb1HmeJ8HUVsy63Ug/1CheXOf6f4ONA+JPGZCXe3vrRt1sRezqQZis4IfZiv8fab14R1XTi+dHu+LSi0eESWAl5F8xLyGzbmy3AIJMb7dtVRzsgNrNmXf+VaLdjrM2HXeGyAvrAXl9t2CmkE/ecRb9GzHS0T+P9HHAtITeWi2hIV+NLZ8Gjy+hY4HxziW/J7JhDUXF2nR9wAmCwPjo/mRc9LFwEPisDL7DScH44vn03vRpUr5+w6+RmA/+h+UFswAT2S2/NX5Mh+RBMxcJLEvl6pcWYHykz/9Q8vM/ovhcqT4k16bFhbi0BuP7j/ULZBcoV6qqVioDGywTJmIGGiIgMKWwuhgGJk6azMtnYcHHO3kS2FjCLkaIYzWYRoBhCo1amwBYVWYPJaKfqAAAAABJRU5ErkJggg==" alt="Creative Commons Attribution-ShareAlike 3.0 Unported" data-pagespeed-url-hash="1757199996" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a>	</li>
<li id="footer-poweredbyico">
<a href="http://www.mediawiki.org/"><img src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" data-pagespeed-url-hash="835634904" onload="pagespeed.CriticalImages.checkImageForCriticality(this);" width="88" height="31"></a>	</li>
</ul>
<div style="clear:both"></div>
</div>
<!-- /footer -->
<script src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/load_002.js"></script><script src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/load_003.php"></script>
<script>if(window.mediaWiki){mediaWiki.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Pygame-Tutorial","wgTitle":"Pygame-Tutorial","wgAction":"view","wgArticleId":51,"wgIsArticle":true,"wgUserName":null,"wgUserGroups":["*"],"wgCurRevisionId":2925,"wgCategories":["Tutorial","Für Einsteiger","Python"],"wgBreakFrames":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgFlaggedRevsParams":{"tags":{"accuracy":{"levels":3,"quality":2,"pristine":4}}},"wgStableRevisionId":2925,"wgRevContents":{"error":"Konnte keinen Inhalt empfangen.","waiting":"Warte auf Inhalt"},"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"templateEditor":false,"templates":false,"addMediaWizard":false,"preview":false,"previewDialog":false,"publish":false,"toc":false},"wgVectorEnabledModules":{"collapsiblenav":false,"collapsibletabs":true,"editwarning":true,"expandablesearch":false,"footercleanup":false,"simplesearch":true}});}</script>
<script>if(window.mediaWiki){mediaWiki.loader.load(["mediawiki.util","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","ext.vector.collapsibleTabs","ext.vector.editWarning","ext.vector.simpleSearch"]);mediaWiki.loader.go();}</script><script type="text/javascript" src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/load_002.php"></script><script type="text/javascript" src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/load.php"></script>
<script src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/flaggedrevs.js"></script>
<script>FlaggedRevs.messages={"diffToggleShow":"Änderungen anzeigen","diffToggleHide":"Änderungen verstecken","logToggleShow":"zeige das Logbuch der stabilen Versionen","logToggleHide":"zeige nicht das Logbuch der stabilen Versionen","logDetailsShow":"Details anzeigen","logDetailsHide":"Details ausblenden","toggleShow":"(+)","toggleHide":"(-)"};</script>
<script src="Pygame-Tutorial%20%E2%80%93%20spieleprogrammierer.de%20Wiki-Dateien/load.js"></script>
<script>if(window.mediaWiki){mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":0,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"timecorrection":"ZoneInfo|120|Europe/Berlin","flaggedrevssimpleui":1,"flaggedrevsstable":false,"flaggedrevseditdiffs":true,"flaggedrevsviewdiffs":false,"usebetatoolbar":true,"usebetatoolbar-cgd":true,"wikieditor-preview":true,"vector-simplesearch":1,"useeditwarning":true,"variant":"de","language":"de","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mediaWiki.loader.state({"user.options":"ready"});}</script>	<!-- fixalpha -->
<script type="text/javascript">if(window.isMSIE55)fixalpha();</script>
<!-- /fixalpha -->
<!-- Served in 0.093 secs. -->	

<div style="top: 0px; width: 0px; display: none; left: auto; right: 1908px;" class="suggestions"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>